var background=webpackJsonp_name_([3],{"8jN1":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__("Xxa5");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__common_utils__ = __webpack_require__("JaHG");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__scriptbuild__ = __webpack_require__("jliz");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_compare_versions__ = __webpack_require__("u9Pu");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_compare_versions___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_compare_versions__);\n\n\nvar _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };\n\n/**\n * @param {string|soulsign.Task} task \n * @returns {soulsign.Task}\n */\nvar runTask = function () {\n\tvar _ref2 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee(task) {\n\t\tvar now;\n\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n\t\t\twhile (1) {\n\t\t\t\tswitch (_context.prev = _context.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tif (!(typeof task === "string")) {\n\t\t\t\t\t\t\t_context.next = 4;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_context.next = 3;\n\t\t\t\t\t\treturn getTask(task);\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\ttask = _context.sent;\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tnow = Date.now();\n\n\t\t\t\t\t\ttask.run_at = now;\n\t\t\t\t\t\ttask.cnt++;\n\t\t\t\t\t\tconsole.log(task.name, \'开始签到\');\n\t\t\t\t\t\t_context.prev = 8;\n\t\t\t\t\t\t_context.t0 = filTask;\n\t\t\t\t\t\t_context.t1 = task;\n\t\t\t\t\t\t_context.next = 13;\n\t\t\t\t\t\treturn task.run(task._params);\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t_context.t2 = _context.sent;\n\t\t\t\t\t\t(0, _context.t0)(_context.t1, _context.t2);\n\n\t\t\t\t\t\ttask.success_at = now;\n\t\t\t\t\t\ttask.ok++;\n\t\t\t\t\t\tconsole.log(task.name, \'签到成功\');\n\t\t\t\t\t\t_context.next = 25;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 20:\n\t\t\t\t\t\t_context.prev = 20;\n\t\t\t\t\t\t_context.t3 = _context[\'catch\'](8);\n\n\t\t\t\t\t\tfilTask(task, _context.t3 || \'失败\');\n\t\t\t\t\t\ttask.failure_at = now;\n\t\t\t\t\t\tconsole.error(task.name, \'签到失败\', _context.t3);\n\n\t\t\t\t\tcase 25:\n\t\t\t\t\t\treturn _context.abrupt(\'return\', task);\n\n\t\t\t\t\tcase 26:\n\t\t\t\t\tcase \'end\':\n\t\t\t\t\t\treturn _context.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t}, _callee, this, [[8, 20]]);\n\t}));\n\n\treturn function runTask(_x) {\n\t\treturn _ref2.apply(this, arguments);\n\t};\n}();\n\n/**\n * @param {soulsign.Task} task \n */\n\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n// chrome.storage.sync = chrome.storage.local;\nvar TASK_EXT = {\n\tonline_at: 0,\n\trun_at: 0,\n\tsuccess_at: 0,\n\tfailure_at: 0,\n\tresult: \'\',\n\tenable: true,\n\tok: 0,\n\tcnt: 0,\n\t_params: {}\n};\n\nfunction localSave(data) {\n\treturn new Promise(function (resolve, reject) {\n\t\tif (__WEBPACK_IMPORTED_MODULE_1__common_utils__["a" /* default */].isFirefox) data = JSON.parse(JSON.stringify(data));\n\t\tchrome.storage.local.set(data, resolve);\n\t});\n}\n\nfunction localGet(keys) {\n\treturn new Promise(function (resolve, reject) {\n\t\tchrome.storage.local.get(keys, function (data) {\n\t\t\tif (typeof keys === "string") resolve(data[keys]);else resolve(data);\n\t\t});\n\t});\n}\n\nfunction syncSave(data) {\n\treturn new Promise(function (resolve, reject) {\n\t\tif (__WEBPACK_IMPORTED_MODULE_1__common_utils__["a" /* default */].isFirefox) data = JSON.parse(JSON.stringify(data));\n\t\tchrome.storage.sync.set(data, resolve);\n\t});\n}\n\nfunction syncGet(keys) {\n\treturn new Promise(function (resolve, reject) {\n\t\tchrome.storage.sync.get(keys, function (data) {\n\t\t\tif (typeof keys === "string") resolve(data[keys]);else resolve(data);\n\t\t});\n\t});\n}\n\nvar cacheTasks = void 0;\n/**\n * @returns {Promise<soulsign.Task[]>}\n */\nfunction getTasks() {\n\treturn new Promise(function (resolve, reject) {\n\t\tif (cacheTasks) return resolve(cacheTasks);\n\t\tchrome.storage.sync.get(\'tasks\', function (_ref) {\n\t\t\tvar names = _ref.tasks;\n\n\t\t\tif (!names || !names.length) return resolve(cacheTasks = []);\n\t\t\tchrome.storage.local.get(names, function (tmap) {\n\t\t\t\tvar tasks = [];\n\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\tvar _didIteratorError = false;\n\t\t\t\tvar _iteratorError = undefined;\n\n\t\t\t\ttry {\n\t\t\t\t\tfor (var _iterator = names[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\tvar name = _step.value;\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\ttasks.push(Object(__WEBPACK_IMPORTED_MODULE_2__scriptbuild__["a" /* default */])(tmap[name]));\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(\'\\u811A\\u672C\' + name + \'\\u9519\\u8BEF\', e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = err;\n\t\t\t\t} finally {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t}\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresolve(cacheTasks = tasks);\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * @param {string[]} names \n */\nfunction saveTaskNames(names) {\n\treturn syncSave({ tasks: names });\n}\n\n/**\n * @param {soulsign.Task} task \n * @returns {boolean} exist\n */\nfunction addTask(task) {\n\tif (typeof task.run != \'function\' && typeof task.check != \'function\') return Promise.reject(\'脚本需要run/check函数\');\n\treturn getTasks().then(function (tasks) {\n\t\tvar exist = false;\n\t\tfor (var i = 0; i < tasks.length; i++) {\n\t\t\tvar oldtask = tasks[i];\n\t\t\tif (oldtask.name == task.name && oldtask.author == task.author) {\n\t\t\t\tfor (var k in TASK_EXT) {\n\t\t\t\t\t// 复制原有变量\n\t\t\t\t\tif (task[k] == null || TASK_EXT[k] != null) task[k] = oldtask[k];\n\t\t\t\t}\n\t\t\t\ttasks.splice(i, 1, task);\n\t\t\t\texist = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar pms = Promise.resolve();\n\t\tvar name = task.author + \'/\' + task.name;\n\t\tif (!exist) {\n\t\t\tpms = localGet(name).then(function (oldtask) {\n\t\t\t\tif (oldtask) {\n\t\t\t\t\tfor (var _k in TASK_EXT) {\n\t\t\t\t\t\t// 复制原有变量\n\t\t\t\t\t\tif (task[_k] == null || TASK_EXT[_k] != null) task[_k] = oldtask[_k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttasks.push(task);\n\t\t\t});\n\t\t}\n\t\treturn pms.then(function () {\n\t\t\treturn Promise.all([saveTaskNames(tasks.map(function (x) {\n\t\t\t\treturn x.author + \'/\' + x.name;\n\t\t\t})), localSave(_defineProperty({}, name, task))]).then(function () {\n\t\t\t\treturn exist;\n\t\t\t});\n\t\t});\n\t});\n}\n\n/**\n * @param {string} name \n * @returns {Promise<soulsign.Task>}\n */\nfunction getTask(name) {\n\treturn getTasks().then(function (tasks) {\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = tasks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar task = _step2.value;\n\n\t\t\t\tif (task.author + \'/\' + task.name == name) return task;\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t_iterator2.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\n/**\n * @param {string} name \n * @returns {boolean} exist\n */\nfunction delTask(name) {\n\treturn getTasks().then(function (tasks) {\n\t\tvar names = tasks.map(function (x) {\n\t\t\treturn x.author + \'/\' + x.name;\n\t\t});\n\t\tvar exist = false;\n\t\tfor (var i = 0; i < names.length; i++) {\n\t\t\tif (name == names[i]) {\n\t\t\t\ttasks.splice(i, 1);\n\t\t\t\tnames.splice(i, 1);\n\t\t\t\texist = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (exist) return saveTaskNames(names).then(function () {\n\t\t\treturn exist;\n\t\t});\n\t\treturn exist;\n\t});\n}function setTask(task) {\n\tvar name = task.author + \'/\' + task.name;\n\treturn getTask(name).then(function (oldtask) {\n\t\tif (oldtask) {\n\t\t\tObject.assign(oldtask, task);\n\t\t\tlocalSave(_defineProperty({}, name, oldtask));\n\t\t}\n\t\treturn !!oldtask;\n\t});\n}\n\n/**\n * @name filterTask filTask\n * @param {string|soulsign.Task.result} result\n * @returns {string|soulsign.Task.result}\n */\nfunction filTask(task) {\n\tvar result = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : task.result;\n\n\tvar base = {\n\t\tsummary: "",\n\t\tdetail: [{\n\t\t\tdomain: task.domains[0],\n\t\t\turl: "#",\n\t\t\tmessage: "NO_MESSAGE",\n\t\t\terrno: task.success_at < task.failure_at\n\t\t}]\n\t};\n\tif ("object" == (typeof result === \'undefined\' ? \'undefined\' : _typeof(result)) && result.summary) {\n\t\tbase = Object.assign(base, result);\n\t} else {\n\t\tbase.summary = result + \'\';\n\t\tbase.detail[0].message = result;\n\t\tif (task.loginURL) base.detail[0].url = task.loginURL.match(/([^:]+:\\/\\/[^\\/]+)+(.*)/)[Number(!base.detail[0].errno)];\n\t}\n\tif (base.summary === "") base.summary = "NO_SUMMARY";\n\treturn task.result = base;\n}\n\n/**\n * @name extendTask extTask\n * @returns {object}\n */\nfunction extTask() {\n\treturn {\n\t\tversion: function version(_version) {\n\t\t\tvar soulsign_version = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getManifest().version;\n\n\t\t\treturn __WEBPACK_IMPORTED_MODULE_3_compare_versions___default()(soulsign_version, _version);\n\t\t},\n\t\tsleep: __WEBPACK_IMPORTED_MODULE_1__common_utils__["a" /* default */].sleep\n\t};\n}\n\n/**\n * @returns {chrome.runtime.getManifest}\n */\nfunction getManifest() {\n\treturn Object.assign({ version: "2.1.0" }, chrome.runtime.getManifest());\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (Object.assign({}, __WEBPACK_IMPORTED_MODULE_1__common_utils__["a" /* default */], {\n\tTASK_EXT: TASK_EXT,\n\tgetTasks: getTasks,\n\taddTask: addTask,\n\tsetTask: setTask,\n\tdelTask: delTask,\n\tgetTask: getTask,\n\trunTask: runTask,\n\tfilTask: filTask,\n\textTask: extTask,\n\tlocalSave: localSave,\n\tlocalGet: localGet,\n\tsyncSave: syncSave,\n\tsyncGet: syncGet,\n\tgetManifest: getManifest,\n\tcompareVersions: __WEBPACK_IMPORTED_MODULE_3_compare_versions___default.a\n}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOGpOMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYmFja2VuZC91dGlscy5qcz9mMDMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1dGlscyBmcm9tICcuLi9jb21tb24vdXRpbHMnO1xuaW1wb3J0IHNjcmlwdGJ1aWxkIGZyb20gJy4vc2NyaXB0YnVpbGQnO1xuaW1wb3J0IGNvbXBhcmVWZXJzaW9ucyBmcm9tICdjb21wYXJlLXZlcnNpb25zJztcbi8vIGNocm9tZS5zdG9yYWdlLnN5bmMgPSBjaHJvbWUuc3RvcmFnZS5sb2NhbDtcbmNvbnN0IFRBU0tfRVhUID0ge1xuXHRvbmxpbmVfYXQ6IDAsXG5cdHJ1bl9hdDogMCxcblx0c3VjY2Vzc19hdDogMCxcblx0ZmFpbHVyZV9hdDogMCxcblx0cmVzdWx0OiAnJyxcblx0ZW5hYmxlOiB0cnVlLFxuXHRvazogMCxcblx0Y250OiAwLFxuXHRfcGFyYW1zOiB7fSxcbn07XG5cbmZ1bmN0aW9uIGxvY2FsU2F2ZShkYXRhKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRpZiAodXRpbHMuaXNGaXJlZm94KSBkYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkYXRhKSk7XG5cdFx0Y2hyb21lLnN0b3JhZ2UubG9jYWwuc2V0KGRhdGEsIHJlc29sdmUpXG5cdH0pO1xufVxuXG5mdW5jdGlvbiBsb2NhbEdldChrZXlzKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRjaHJvbWUuc3RvcmFnZS5sb2NhbC5nZXQoa2V5cywgZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0aWYgKHR5cGVvZiBrZXlzID09PSBcInN0cmluZ1wiKSByZXNvbHZlKGRhdGFba2V5c10pXG5cdFx0XHRlbHNlIHJlc29sdmUoZGF0YSlcblx0XHR9KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHN5bmNTYXZlKGRhdGEpIHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdGlmICh1dGlscy5pc0ZpcmVmb3gpIGRhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcblx0XHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldChkYXRhLCByZXNvbHZlKVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gc3luY0dldChrZXlzKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldChrZXlzLCBmdW5jdGlvbihkYXRhKSB7XG5cdFx0XHRpZiAodHlwZW9mIGtleXMgPT09IFwic3RyaW5nXCIpIHJlc29sdmUoZGF0YVtrZXlzXSlcblx0XHRcdGVsc2UgcmVzb2x2ZShkYXRhKVxuXHRcdH0pO1xuXHR9KTtcbn1cblxubGV0IGNhY2hlVGFza3Ncbi8qKlxuICogQHJldHVybnMge1Byb21pc2U8c291bHNpZ24uVGFza1tdPn1cbiAqL1xuZnVuY3Rpb24gZ2V0VGFza3MoKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRpZiAoY2FjaGVUYXNrcykgcmV0dXJuIHJlc29sdmUoY2FjaGVUYXNrcyk7XG5cdFx0Y2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoJ3Rhc2tzJywgKHsgdGFza3M6IG5hbWVzIH0pID0+IHtcblx0XHRcdGlmICghbmFtZXMgfHwgIW5hbWVzLmxlbmd0aCkgcmV0dXJuIHJlc29sdmUoY2FjaGVUYXNrcyA9IFtdKTtcblx0XHRcdGNocm9tZS5zdG9yYWdlLmxvY2FsLmdldChuYW1lcywgZnVuY3Rpb24odG1hcCkge1xuXHRcdFx0XHRsZXQgdGFza3MgPSBbXVxuXHRcdFx0XHRmb3IgKGxldCBuYW1lIG9mIG5hbWVzKSB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdHRhc2tzLnB1c2goc2NyaXB0YnVpbGQodG1hcFtuYW1lXSkpO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYOiEmuacrCR7bmFtZX3plJnor69gLCBlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmVzb2x2ZShjYWNoZVRhc2tzID0gdGFza3MpO1xuXHRcdFx0fSlcblx0XHR9KVxuXHR9KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ1tdfSBuYW1lcyBcbiAqL1xuZnVuY3Rpb24gc2F2ZVRhc2tOYW1lcyhuYW1lcykge1xuXHRyZXR1cm4gc3luY1NhdmUoeyB0YXNrczogbmFtZXMgfSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzb3Vsc2lnbi5UYXNrfSB0YXNrIFxuICogQHJldHVybnMge2Jvb2xlYW59IGV4aXN0XG4gKi9cbmZ1bmN0aW9uIGFkZFRhc2sodGFzaykge1xuXHRpZiAodHlwZW9mIHRhc2sucnVuICE9ICdmdW5jdGlvbicgJiYgdHlwZW9mIHRhc2suY2hlY2sgIT0gJ2Z1bmN0aW9uJylcblx0XHRyZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+iEmuacrOmcgOimgXJ1bi9jaGVja+WHveaVsCcpXG5cdHJldHVybiBnZXRUYXNrcygpLnRoZW4odGFza3MgPT4ge1xuXHRcdGxldCBleGlzdCA9IGZhbHNlO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdGFza3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGxldCBvbGR0YXNrID0gdGFza3NbaV07XG5cdFx0XHRpZiAob2xkdGFzay5uYW1lID09IHRhc2submFtZSAmJiBvbGR0YXNrLmF1dGhvciA9PSB0YXNrLmF1dGhvcikge1xuXHRcdFx0XHRmb3IgKGxldCBrIGluIFRBU0tfRVhUKSB7IC8vIOWkjeWItuWOn+acieWPmOmHj1xuXHRcdFx0XHRcdGlmICh0YXNrW2tdID09IG51bGwgfHwgVEFTS19FWFRba10gIT0gbnVsbClcblx0XHRcdFx0XHRcdHRhc2tba10gPSBvbGR0YXNrW2tdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRhc2tzLnNwbGljZShpLCAxLCB0YXNrKTtcblx0XHRcdFx0ZXhpc3QgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0bGV0IHBtcyA9IFByb21pc2UucmVzb2x2ZSgpXG5cdFx0bGV0IG5hbWUgPSB0YXNrLmF1dGhvciArICcvJyArIHRhc2submFtZVxuXHRcdGlmICghZXhpc3QpIHtcblx0XHRcdHBtcyA9IGxvY2FsR2V0KG5hbWUpLnRoZW4ob2xkdGFzayA9PiB7XG5cdFx0XHRcdGlmIChvbGR0YXNrKSB7XG5cdFx0XHRcdFx0Zm9yIChsZXQgayBpbiBUQVNLX0VYVCkgeyAvLyDlpI3liLbljp/mnInlj5jph49cblx0XHRcdFx0XHRcdGlmICh0YXNrW2tdID09IG51bGwgfHwgVEFTS19FWFRba10gIT0gbnVsbClcblx0XHRcdFx0XHRcdFx0dGFza1trXSA9IG9sZHRhc2tba107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRhc2tzLnB1c2godGFzaylcblx0XHRcdH0pXG5cdFx0fVxuXHRcdHJldHVybiBwbXMudGhlbigoKSA9PiBQcm9taXNlLmFsbChbXG5cdFx0XHRzYXZlVGFza05hbWVzKHRhc2tzLm1hcCh4ID0+IHguYXV0aG9yICsgJy8nICsgeC5uYW1lKSksXG5cdFx0XHRsb2NhbFNhdmUoe1xuXHRcdFx0XHRbbmFtZV06IHRhc2tcblx0XHRcdH0pLFxuXHRcdF0pLnRoZW4oKCkgPT4gZXhpc3QpKTtcblx0fSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzb3Vsc2lnbi5UYXNrPn1cbiAqL1xuZnVuY3Rpb24gZ2V0VGFzayhuYW1lKSB7XG5cdHJldHVybiBnZXRUYXNrcygpLnRoZW4odGFza3MgPT4ge1xuXHRcdGZvciAobGV0IHRhc2sgb2YgdGFza3MpIHtcblx0XHRcdGlmICh0YXNrLmF1dGhvciArICcvJyArIHRhc2submFtZSA9PSBuYW1lKVxuXHRcdFx0XHRyZXR1cm4gdGFzaztcblx0XHR9XG5cdH0pXG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gZXhpc3RcbiAqL1xuZnVuY3Rpb24gZGVsVGFzayhuYW1lKSB7XG5cdHJldHVybiBnZXRUYXNrcygpLnRoZW4odGFza3MgPT4ge1xuXHRcdGxldCBuYW1lcyA9IHRhc2tzLm1hcCh4ID0+IHguYXV0aG9yICsgJy8nICsgeC5uYW1lKTtcblx0XHRsZXQgZXhpc3QgPSBmYWxzZTtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAobmFtZSA9PSBuYW1lc1tpXSkge1xuXHRcdFx0XHR0YXNrcy5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdG5hbWVzLnNwbGljZShpLCAxKTtcblx0XHRcdFx0ZXhpc3QgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGV4aXN0KSByZXR1cm4gc2F2ZVRhc2tOYW1lcyhuYW1lcykudGhlbigoKSA9PiBleGlzdCk7XG5cdFx0cmV0dXJuIGV4aXN0O1xuXHR9KVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfHNvdWxzaWduLlRhc2t9IHRhc2sgXG4gKiBAcmV0dXJucyB7c291bHNpZ24uVGFza31cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcnVuVGFzayh0YXNrKSB7XG5cdGlmICh0eXBlb2YgdGFzayA9PT0gXCJzdHJpbmdcIilcblx0XHR0YXNrID0gYXdhaXQgZ2V0VGFzayh0YXNrKTtcblx0bGV0IG5vdyA9IERhdGUubm93KCk7XG5cdHRhc2sucnVuX2F0ID0gbm93O1xuXHR0YXNrLmNudCsrO1xuXHRjb25zb2xlLmxvZyh0YXNrLm5hbWUsICflvIDlp4vnrb7liLAnKTtcblx0dHJ5IHtcblx0XHRmaWxUYXNrKHRhc2ssIGF3YWl0IHRhc2sucnVuKHRhc2suX3BhcmFtcykpO1xuXHRcdHRhc2suc3VjY2Vzc19hdCA9IG5vdztcblx0XHR0YXNrLm9rKys7XG5cdFx0Y29uc29sZS5sb2codGFzay5uYW1lLCAn562+5Yiw5oiQ5YqfJyk7XG5cdH0gY2F0Y2ggKGVycikge1xuXHRcdGZpbFRhc2sodGFzaywgKGVyciB8fCAn5aSx6LSlJykpO1xuXHRcdHRhc2suZmFpbHVyZV9hdCA9IG5vdztcblx0XHRjb25zb2xlLmVycm9yKHRhc2submFtZSwgJ+etvuWIsOWksei0pScsIGVycik7XG5cdH1cblx0cmV0dXJuIHRhc2s7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzb3Vsc2lnbi5UYXNrfSB0YXNrIFxuICovXG5mdW5jdGlvbiBzZXRUYXNrKHRhc2spIHtcblx0bGV0IG5hbWUgPSB0YXNrLmF1dGhvciArICcvJyArIHRhc2submFtZTtcblx0cmV0dXJuIGdldFRhc2sobmFtZSkudGhlbihmdW5jdGlvbihvbGR0YXNrKSB7XG5cdFx0aWYgKG9sZHRhc2spIHtcblx0XHRcdE9iamVjdC5hc3NpZ24ob2xkdGFzaywgdGFzaylcblx0XHRcdGxvY2FsU2F2ZSh7XG5cdFx0XHRcdFtuYW1lXTogb2xkdGFza1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiAhIW9sZHRhc2s7XG5cdH0pXG59XG5cbi8qKlxuICogQG5hbWUgZmlsdGVyVGFzayBmaWxUYXNrXG4gKiBAcGFyYW0ge3N0cmluZ3xzb3Vsc2lnbi5UYXNrLnJlc3VsdH0gcmVzdWx0XG4gKiBAcmV0dXJucyB7c3RyaW5nfHNvdWxzaWduLlRhc2sucmVzdWx0fVxuICovXG5mdW5jdGlvbiBmaWxUYXNrKHRhc2ssIHJlc3VsdCA9IHRhc2sucmVzdWx0KSB7XG5cdGxldCBiYXNlID0ge1xuXHRcdHN1bW1hcnk6IFwiXCIsXG5cdFx0ZGV0YWlsOiBbXG5cdFx0XHR7XG5cdFx0XHRcdGRvbWFpbjogdGFzay5kb21haW5zWzBdLFxuXHRcdFx0XHR1cmw6IFwiI1wiLFxuXHRcdFx0XHRtZXNzYWdlOiBcIk5PX01FU1NBR0VcIixcblx0XHRcdFx0ZXJybm86IHRhc2suc3VjY2Vzc19hdCA8IHRhc2suZmFpbHVyZV9hdCxcblx0XHRcdH0sXG5cdFx0XSxcblx0fTtcblx0aWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIHJlc3VsdCAmJiByZXN1bHQuc3VtbWFyeSkge1xuXHRcdGJhc2UgPSBPYmplY3QuYXNzaWduKGJhc2UsIHJlc3VsdCk7XG5cdH0gZWxzZSB7XG5cdFx0YmFzZS5zdW1tYXJ5ID0gcmVzdWx0ICsgJyc7XG5cdFx0YmFzZS5kZXRhaWxbMF0ubWVzc2FnZSA9IHJlc3VsdDtcblx0XHRpZiAodGFzay5sb2dpblVSTClcblx0XHRcdGJhc2UuZGV0YWlsWzBdLnVybCA9IHRhc2subG9naW5VUkwubWF0Y2goLyhbXjpdKzpcXC9cXC9bXlxcL10rKSsoLiopLylbTnVtYmVyKCFiYXNlLmRldGFpbFswXS5lcnJubyldO1xuXHR9XG5cdGlmIChiYXNlLnN1bW1hcnkgPT09IFwiXCIpIGJhc2Uuc3VtbWFyeSA9IFwiTk9fU1VNTUFSWVwiO1xuXHRyZXR1cm4gKHRhc2sucmVzdWx0ID0gYmFzZSk7XG59XG5cbi8qKlxuICogQG5hbWUgZXh0ZW5kVGFzayBleHRUYXNrXG4gKiBAcmV0dXJucyB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBleHRUYXNrKCkge1xuXHRyZXR1cm4ge1xuXHRcdHZlcnNpb246IGZ1bmN0aW9uKHZlcnNpb24sIHNvdWxzaWduX3ZlcnNpb24gPSBnZXRNYW5pZmVzdCgpLnZlcnNpb24pIHtcblx0XHRcdHJldHVybiBjb21wYXJlVmVyc2lvbnMoc291bHNpZ25fdmVyc2lvbiwgdmVyc2lvbik7XG5cdFx0fSxcblx0XHRzbGVlcDogdXRpbHMuc2xlZXAsXG5cdH07XG59XG5cbi8qKlxuICogQHJldHVybnMge2Nocm9tZS5ydW50aW1lLmdldE1hbmlmZXN0fVxuICovXG5mdW5jdGlvbiBnZXRNYW5pZmVzdCgpIHtcblx0cmV0dXJuIE9iamVjdC5hc3NpZ24oeyB2ZXJzaW9uOiBcIjIuMS4wXCIgfSwgY2hyb21lLnJ1bnRpbWUuZ2V0TWFuaWZlc3QoKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IE9iamVjdC5hc3NpZ24oe30sIHV0aWxzLCB7XG5cdFRBU0tfRVhULFxuXHRnZXRUYXNrcyxcblx0YWRkVGFzayxcblx0c2V0VGFzayxcblx0ZGVsVGFzayxcblx0Z2V0VGFzayxcblx0cnVuVGFzayxcblx0ZmlsVGFzayxcblx0ZXh0VGFzayxcblx0bG9jYWxTYXZlLFxuXHRsb2NhbEdldCxcblx0c3luY1NhdmUsXG5cdHN5bmNHZXQsXG5cdGdldE1hbmlmZXN0LFxuXHRjb21wYXJlVmVyc2lvbnMsXG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2JhY2tlbmQvdXRpbHMuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUE0SkE7Ozs7O0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFDQTtBQUhBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBWEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQWhCQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7Ozs7O0FBb0JBOzs7Ozs7Ozs7QUFwTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBQ0E7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBTEE7QUFNQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUpBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUE4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBSEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFmQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8jN1\n')},JaHG:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios__ = __webpack_require__(\"mtWM\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_axios__);\n\nvar ts = [[86400e3 * 365, \"年\"], [86400e3 * 30, \"月\"], [86400e3, \"天\"], [3600e3, \"小时\"], [60e3, \"分钟\"], [1e3, \"秒\"]];\nvar isFirefox = /firefox/i.test(navigator.userAgent);\nwindow.axios = __WEBPACK_IMPORTED_MODULE_0_axios___default.a;\nvar utils = {\n\tisFirefox: isFirefox,\n\taxios: __WEBPACK_IMPORTED_MODULE_0_axios___default.a.create({ timeout: 30e3 }),\n\tfromNow: function fromNow(v, digits, def) {\n\t\tdigits = digits || 0;\n\t\tif (!v) return def || '未设置';\n\t\tif (typeof v === \"number\" && v < 1e12) {\n\t\t\tv *= 1e3;\n\t\t}\n\t\tv = new Date(v) - new Date();\n\t\tvar s = utils.diff(Math.abs(v), digits, v > 0 ? '后' : '前');\n\t\tif (s) return s;\n\t\treturn '现在';\n\t},\n\tdiff: function diff(v, digits, suffix) {\n\t\tsuffix = suffix || '';\n\t\tvar s = '';\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = ts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar unit = _step.value;\n\n\t\t\t\tvar diff = v / unit[0];\n\t\t\t\tvar tmp = Math.floor(diff);\n\t\t\t\tif (tmp) {\n\t\t\t\t\tif (digits) {\n\t\t\t\t\t\tvar n = Math.pow(10, digits);\n\t\t\t\t\t\ts = Math.floor(v / unit[0] * n) / n;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ts = tmp;\n\t\t\t\t\t}\n\t\t\t\t\ts += unit[1];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (s) return s + suffix;\n\t},\n\n\t/**\n  * 复制一个去掉keys的body对象\n  * @param {Object} body \n  * @param {string[]|{}} keys \n  */\n\tclearKeys: function clearKeys(body, keys) {\n\t\tvar data = {};\n\t\tif (keys instanceof Array) {\n\t\t\t// 清除keys中的字段\n\t\t\tObject.assign(data, body);\n\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\tvar _didIteratorError2 = false;\n\t\t\tvar _iteratorError2 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\tvar key = _step2.value;\n\n\t\t\t\t\tdelete data[key];\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t_iteratorError2 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// 清除与keys值相同的字段\n\t\t\tfor (var k in body) {\n\t\t\t\tvar v = body[k];\n\t\t\t\tif (keys[k] != v) data[k] = v;\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t},\n\n\t/**\n  * @param {number} t \n  * @param {string} format \n  */\n\tformat: function format(t, _format) {\n\t\tif (typeof t === \"number\" && t < 1e12) {\n\t\t\tt *= 1e3;\n\t\t}\n\t\tt = new Date(t);\n\t\tvar Y = (t.getFullYear() + 1e4).toString().slice(1);\n\t\treturn _format.replace(/YYYY/g, Y).replace(/YY/g, Y.slice(2)).replace(/MM/g, (t.getMonth() + 101).toString().slice(1)).replace(/DD/g, (t.getDate() + 100).toString().slice(1)).replace(/hh/g, (t.getHours() + 100).toString().slice(1)).replace(/mm/g, (t.getMinutes() + 100).toString().slice(1)).replace(/ss/g, (t.getSeconds() + 100).toString().slice(1));\n\t},\n\tsleep: function sleep(ms) {\n\t\treturn new Promise(function (resolve) {\n\t\t\treturn setTimeout(resolve, ms);\n\t\t});\n\t},\n\tcompileTask: function compileTask(text) {\n\t\tvar beg = text.indexOf('==UserScript==');\n\t\tvar end = text.indexOf('==/UserScript==');\n\t\tif (beg < 0 || end < 0 || beg > end) return;\n\t\tvar task = { code: text };\n\t\ttext = text.slice(beg + 14, end);\n\t\ttext = text.replace(/\\n\\s*\\/\\/ ?/g, '\\n');\n\t\ttext = text.split(/\\n\\s*@/);\n\t\ttext = text.map(function (x) {\n\t\t\treturn x.trim();\n\t\t}).filter(function (x) {\n\t\t\treturn x;\n\t\t});\n\t\tvar _iteratorNormalCompletion3 = true;\n\t\tvar _didIteratorError3 = false;\n\t\tvar _iteratorError3 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator3 = text[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\tvar line = _step3.value;\n\n\t\t\t\tvar name = /\\w+\\s*/.exec(line);\n\t\t\t\tif (name) {\n\t\t\t\t\tname = name[0];\n\t\t\t\t\tvar value = line.slice(name.length).replace(new RegExp(Array.from({ length: name.length + 1 }).fill(' ').join(''), 'g'), '').trim();\n\t\t\t\t\tname = name.trim();\n\t\t\t\t\tvar one = task[name];\n\t\t\t\t\tif (one) {\n\t\t\t\t\t\tvar ones = task[name + 's'];\n\t\t\t\t\t\tif (ones) ones.push(value);else task[name + 's'] = [one, value];\n\t\t\t\t\t}\n\t\t\t\t\ttask[name] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// console.log(task)\n\t\t} catch (err) {\n\t\t\t_didIteratorError3 = true;\n\t\t\t_iteratorError3 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t_iterator3.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!task) throw '格式非法,找不到==UserScript==区域';\n\t\tif (!task.author) task.author = '';\n\t\tif (!task.name) throw '缺少@name';\n\t\tif (!task.domain) throw '缺少@domain';else if (!task.domains) task.domains = [task.domain];\n\t\tif (task.grant && !task.grants) task.grants = task.grant.split(',');\n\t\tif (task.param && !task.params) task.params = [task.param];\n\t\tif (task.params) {\n\t\t\ttask._params = {};\n\t\t\ttask.params = task.params.map(function (x) {\n\t\t\t\tvar param = {};\n\t\t\t\tvar ss = x.split(/\\s+/);\n\t\t\t\tparam.placeholder = param.label = param.name = ss[0];\n\t\t\t\tparam.type = 'text';\n\t\t\t\tif (ss.length > 2) {\n\t\t\t\t\tparam.label = ss.slice(2).join(' ');\n\t\t\t\t\ttry {\n\t\t\t\t\t\tparam.type = 'select';\n\t\t\t\t\t\tparam.options = \"[\" + ss[1] + \"]\";\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tparam.type = ss[1];\n\t\t\t\t\t}\n\t\t\t\t} else if (ss.length == 2) {\n\t\t\t\t\tparam.label = ss[1];\n\t\t\t\t}\n\t\t\t\tvar ll = param.label.split(',');\n\t\t\t\tparam.label = ll[0];\n\t\t\t\tif (ll.length > 1) param.placeholder = ll.slice(1).join(',');\n\t\t\t\treturn param;\n\t\t\t});\n\t\t}\n\t\tdelete task.param;\n\t\tdelete task.domain;\n\t\ttask.expire = +task.expire || 900e3; // 默认15分钟过期\n\t\ttask.enable = false;\n\t\treturn task;\n\t}\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (utils);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSmFIRy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvY29tbW9uL3V0aWxzLmpzP2FhZjMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmNvbnN0IHRzID0gW1xuXHRbODY0MDBlMyAqIDM2NSwgXCLlubRcIl0sXG5cdFs4NjQwMGUzICogMzAsIFwi5pyIXCJdLFxuXHRbODY0MDBlMywgXCLlpKlcIl0sXG5cdFszNjAwZTMsIFwi5bCP5pe2XCJdLFxuXHRbNjBlMywgXCLliIbpkp9cIl0sXG5cdFsxZTMsIFwi56eSXCJdLFxuXTtcbmNvbnN0IGlzRmlyZWZveCA9IC9maXJlZm94L2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbndpbmRvdy5heGlvcyA9IGF4aW9zO1xubGV0IHV0aWxzID0ge1xuXHRpc0ZpcmVmb3gsXG5cdGF4aW9zOiBheGlvcy5jcmVhdGUoeyB0aW1lb3V0OiAzMGUzIH0pLFxuXHRmcm9tTm93KHYsIGRpZ2l0cywgZGVmKSB7XG5cdFx0ZGlnaXRzID0gZGlnaXRzIHx8IDA7XG5cdFx0aWYgKCF2KSByZXR1cm4gZGVmIHx8ICfmnKrorr7nva4nO1xuXHRcdGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIiAmJiB2IDwgMWUxMikge1xuXHRcdFx0diAqPSAxZTM7XG5cdFx0fVxuXHRcdHYgPSBuZXcgRGF0ZSh2KSAtIG5ldyBEYXRlKCk7XG5cdFx0bGV0IHMgPSB1dGlscy5kaWZmKE1hdGguYWJzKHYpLCBkaWdpdHMsIHYgPiAwID8gJ+WQjicgOiAn5YmNJyk7XG5cdFx0aWYgKHMpIHJldHVybiBzO1xuXHRcdHJldHVybiAn546w5ZyoJztcblx0fSxcblx0ZGlmZih2LCBkaWdpdHMsIHN1ZmZpeCkge1xuXHRcdHN1ZmZpeCA9IHN1ZmZpeCB8fCAnJztcblx0XHRsZXQgcyA9ICcnO1xuXHRcdGZvciAobGV0IHVuaXQgb2YgdHMpIHtcblx0XHRcdGxldCBkaWZmID0gdiAvIHVuaXRbMF07XG5cdFx0XHRsZXQgdG1wID0gTWF0aC5mbG9vcihkaWZmKTtcblx0XHRcdGlmICh0bXApIHtcblx0XHRcdFx0aWYgKGRpZ2l0cykge1xuXHRcdFx0XHRcdGxldCBuID0gTWF0aC5wb3coMTAsIGRpZ2l0cyk7XG5cdFx0XHRcdFx0cyA9IE1hdGguZmxvb3IodiAvIHVuaXRbMF0gKiBuKSAvIG47XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cyA9IHRtcDtcblx0XHRcdFx0fVxuXHRcdFx0XHRzICs9IHVuaXRbMV07XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAocykgcmV0dXJuIHMgKyBzdWZmaXg7XG5cdH0sXG5cdC8qKlxuXHQgKiDlpI3liLbkuIDkuKrljrvmjolrZXlz55qEYm9keeWvueixoVxuXHQgKiBAcGFyYW0ge09iamVjdH0gYm9keSBcblx0ICogQHBhcmFtIHtzdHJpbmdbXXx7fX0ga2V5cyBcblx0ICovXG5cdGNsZWFyS2V5cyhib2R5LCBrZXlzKSB7XG5cdFx0bGV0IGRhdGEgPSB7fTtcblx0XHRpZiAoa2V5cyBpbnN0YW5jZW9mIEFycmF5KSB7IC8vIOa4hemZpGtleXPkuK3nmoTlrZfmrrVcblx0XHRcdE9iamVjdC5hc3NpZ24oZGF0YSwgYm9keSk7XG5cdFx0XHRmb3IgKGxldCBrZXkgb2Yga2V5cykge1xuXHRcdFx0XHRkZWxldGUgZGF0YVtrZXldO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7IC8vIOa4hemZpOS4jmtleXPlgLznm7jlkIznmoTlrZfmrrVcblx0XHRcdGZvciAobGV0IGsgaW4gYm9keSkge1xuXHRcdFx0XHRsZXQgdiA9IGJvZHlba107XG5cdFx0XHRcdGlmIChrZXlzW2tdICE9IHYpXG5cdFx0XHRcdFx0ZGF0YVtrXSA9IHY7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBkYXRhO1xuXHR9LFxuXHQvKipcblx0ICogQHBhcmFtIHtudW1iZXJ9IHQgXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBmb3JtYXQgXG5cdCAqL1xuXHRmb3JtYXQodCwgZm9ybWF0KSB7XG5cdFx0aWYgKHR5cGVvZiB0ID09PSBcIm51bWJlclwiICYmIHQgPCAxZTEyKSB7XG5cdFx0XHR0ICo9IDFlMztcblx0XHR9XG5cdFx0dCA9IG5ldyBEYXRlKHQpO1xuXHRcdGxldCBZID0gKHQuZ2V0RnVsbFllYXIoKSArIDFlNCkudG9TdHJpbmcoKS5zbGljZSgxKTtcblx0XHRyZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1lZWVkvZywgWSlcblx0XHRcdC5yZXBsYWNlKC9ZWS9nLCBZLnNsaWNlKDIpKVxuXHRcdFx0LnJlcGxhY2UoL01NL2csICh0LmdldE1vbnRoKCkgKyAxMDEpLnRvU3RyaW5nKCkuc2xpY2UoMSkpXG5cdFx0XHQucmVwbGFjZSgvREQvZywgKHQuZ2V0RGF0ZSgpICsgMTAwKS50b1N0cmluZygpLnNsaWNlKDEpKVxuXHRcdFx0LnJlcGxhY2UoL2hoL2csICh0LmdldEhvdXJzKCkgKyAxMDApLnRvU3RyaW5nKCkuc2xpY2UoMSkpXG5cdFx0XHQucmVwbGFjZSgvbW0vZywgKHQuZ2V0TWludXRlcygpICsgMTAwKS50b1N0cmluZygpLnNsaWNlKDEpKVxuXHRcdFx0LnJlcGxhY2UoL3NzL2csICh0LmdldFNlY29uZHMoKSArIDEwMCkudG9TdHJpbmcoKS5zbGljZSgxKSk7XG5cdH0sXG5cdHNsZWVwKG1zKSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuXHR9LFxuXHRjb21waWxlVGFzayh0ZXh0KSB7XG5cdFx0bGV0IGJlZyA9IHRleHQuaW5kZXhPZignPT1Vc2VyU2NyaXB0PT0nKTtcblx0XHRsZXQgZW5kID0gdGV4dC5pbmRleE9mKCc9PS9Vc2VyU2NyaXB0PT0nKTtcblx0XHRpZiAoYmVnIDwgMCB8fCBlbmQgPCAwIHx8IGJlZyA+IGVuZCkgcmV0dXJuO1xuXHRcdGxldCB0YXNrID0geyBjb2RlOiB0ZXh0IH07XG5cdFx0dGV4dCA9IHRleHQuc2xpY2UoYmVnICsgMTQsIGVuZCk7XG5cdFx0dGV4dCA9IHRleHQucmVwbGFjZSgvXFxuXFxzKlxcL1xcLyA/L2csICdcXG4nKTtcblx0XHR0ZXh0ID0gdGV4dC5zcGxpdCgvXFxuXFxzKkAvKTtcblx0XHR0ZXh0ID0gdGV4dC5tYXAoeCA9PiB4LnRyaW0oKSkuZmlsdGVyKHggPT4geCk7XG5cdFx0Zm9yIChsZXQgbGluZSBvZiB0ZXh0KSB7XG5cdFx0XHRsZXQgbmFtZSA9IC9cXHcrXFxzKi8uZXhlYyhsaW5lKTtcblx0XHRcdGlmIChuYW1lKSB7XG5cdFx0XHRcdG5hbWUgPSBuYW1lWzBdO1xuXHRcdFx0XHRsZXQgdmFsdWUgPSBsaW5lLnNsaWNlKG5hbWUubGVuZ3RoKS5yZXBsYWNlKG5ldyBSZWdFeHAoQXJyYXkuZnJvbSh7IGxlbmd0aDogbmFtZS5sZW5ndGggKyAxIH0pLmZpbGwoJyAnKS5qb2luKCcnKSwgJ2cnKSwgJycpLnRyaW0oKTtcblx0XHRcdFx0bmFtZSA9IG5hbWUudHJpbSgpO1xuXHRcdFx0XHRsZXQgb25lID0gdGFza1tuYW1lXTtcblx0XHRcdFx0aWYgKG9uZSkge1xuXHRcdFx0XHRcdGxldCBvbmVzID0gdGFza1tuYW1lICsgJ3MnXTtcblx0XHRcdFx0XHRpZiAob25lcykgb25lcy5wdXNoKHZhbHVlKTtcblx0XHRcdFx0XHRlbHNlIHRhc2tbbmFtZSArICdzJ10gPSBbb25lLCB2YWx1ZV07XG5cdFx0XHRcdH1cblx0XHRcdFx0dGFza1tuYW1lXSA9IHZhbHVlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBjb25zb2xlLmxvZyh0YXNrKVxuXHRcdGlmICghdGFzaykgdGhyb3cgKCfmoLzlvI/pnZ7ms5Us5om+5LiN5YiwPT1Vc2VyU2NyaXB0PT3ljLrln58nKTtcblx0XHRpZiAoIXRhc2suYXV0aG9yKSB0YXNrLmF1dGhvciA9ICcnO1xuXHRcdGlmICghdGFzay5uYW1lKSB0aHJvdyAoJ+e8uuWwkUBuYW1lJyk7XG5cdFx0aWYgKCF0YXNrLmRvbWFpbikgdGhyb3cgKCfnvLrlsJFAZG9tYWluJyk7XG5cdFx0ZWxzZSBpZiAoIXRhc2suZG9tYWlucykgdGFzay5kb21haW5zID0gW3Rhc2suZG9tYWluXTtcblx0XHRpZiAodGFzay5ncmFudCAmJiAhdGFzay5ncmFudHMpIHRhc2suZ3JhbnRzID0gdGFzay5ncmFudC5zcGxpdCgnLCcpO1xuXHRcdGlmICh0YXNrLnBhcmFtICYmICF0YXNrLnBhcmFtcykgdGFzay5wYXJhbXMgPSBbdGFzay5wYXJhbV07XG5cdFx0aWYgKHRhc2sucGFyYW1zKSB7XG5cdFx0XHR0YXNrLl9wYXJhbXMgPSB7fTtcblx0XHRcdHRhc2sucGFyYW1zID0gdGFzay5wYXJhbXMubWFwKHggPT4ge1xuXHRcdFx0XHRsZXQgcGFyYW0gPSB7fTtcblx0XHRcdFx0bGV0IHNzID0geC5zcGxpdCgvXFxzKy8pO1xuXHRcdFx0XHRwYXJhbS5wbGFjZWhvbGRlciA9IHBhcmFtLmxhYmVsID0gcGFyYW0ubmFtZSA9IHNzWzBdO1xuXHRcdFx0XHRwYXJhbS50eXBlID0gJ3RleHQnO1xuXHRcdFx0XHRpZiAoc3MubGVuZ3RoID4gMikge1xuXHRcdFx0XHRcdHBhcmFtLmxhYmVsID0gc3Muc2xpY2UoMikuam9pbignICcpO1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRwYXJhbS50eXBlID0gJ3NlbGVjdCc7XG5cdFx0XHRcdFx0XHRwYXJhbS5vcHRpb25zID0gYFske3NzWzFdfV1gO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRwYXJhbS50eXBlID0gc3NbMV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKHNzLmxlbmd0aCA9PSAyKSB7XG5cdFx0XHRcdFx0cGFyYW0ubGFiZWwgPSBzc1sxXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRsZXQgbGwgPSBwYXJhbS5sYWJlbC5zcGxpdCgnLCcpO1xuXHRcdFx0XHRwYXJhbS5sYWJlbCA9IGxsWzBdO1xuXHRcdFx0XHRpZiAobGwubGVuZ3RoID4gMSkgcGFyYW0ucGxhY2Vob2xkZXIgPSBsbC5zbGljZSgxKS5qb2luKCcsJyk7XG5cdFx0XHRcdHJldHVybiBwYXJhbTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRkZWxldGUgdGFzay5wYXJhbTtcblx0XHRkZWxldGUgdGFzay5kb21haW47XG5cdFx0dGFzay5leHBpcmUgPSArdGFzay5leHBpcmUgfHwgOTAwZTM7IC8vIOm7mOiupDE15YiG6ZKf6L+H5pyfXG5cdFx0dGFzay5lbmFibGUgPSBmYWxzZTtcblx0XHRyZXR1cm4gdGFzaztcblx0fSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHV0aWxzO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBzcmMvY29tbW9uL3V0aWxzLmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWdCQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFKQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFSQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBU0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeElBO0FBQ0E7QUEwSUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///JaHG\n")},O3Mt:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__(\"Xxa5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__(\"QmEn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils__ = __webpack_require__(\"8jN1\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__backapi__ = __webpack_require__(\"o/p8\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_dayjs__ = __webpack_require__(\"oqQY\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_dayjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_dayjs__);\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar loop = function () {\n\tvar _ref3 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n\t\tvar _this2 = this;\n\n\t\tvar tasks, today, err_cnt, _loop, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, task, _ret;\n\n\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context3) {\n\t\t\twhile (1) {\n\t\t\t\tswitch (_context3.prev = _context3.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\t_context3.next = 2;\n\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].getTasks();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\ttasks = _context3.sent;\n\t\t\t\t\t\ttoday = __WEBPACK_IMPORTED_MODULE_4_dayjs___default()().add(-__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].begin_at, 'second').startOf('day').add(__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].begin_at, 'second');\n\t\t\t\t\t\terr_cnt = 0;\n\t\t\t\t\t\t_loop = /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _loop(task) {\n\t\t\t\t\t\t\tvar changed, now, ok;\n\t\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _loop$(_context2) {\n\t\t\t\t\t\t\t\twhile (1) {\n\t\t\t\t\t\t\t\t\tswitch (_context2.prev = _context2.next) {\n\t\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\t\tif (task.enable) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 2;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\treturn _context2.abrupt('return', 'continue');\n\n\t\t\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t\t\tchanged = false;\n\n\t\t\t\t\t\t\t\t\t\t\tif (!task.check) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 32;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// 有检查是否在线的函数\n\t\t\t\t\t\t\t\t\t\t\tnow = Date.now();\n\n\t\t\t\t\t\t\t\t\t\t\tif (!(task.online_at + task.expire < now)) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 32;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// 没有检查过|之前不在线|到了再次检查时间了\n\t\t\t\t\t\t\t\t\t\t\tchanged = true;\n\t\t\t\t\t\t\t\t\t\t\tok = false;\n\t\t\t\t\t\t\t\t\t\t\t_context2.prev = 8;\n\t\t\t\t\t\t\t\t\t\t\t_context2.next = 11;\n\t\t\t\t\t\t\t\t\t\t\treturn race(task.check(task._params));\n\n\t\t\t\t\t\t\t\t\t\tcase 11:\n\t\t\t\t\t\t\t\t\t\t\tok = _context2.sent;\n\t\t\t\t\t\t\t\t\t\t\t_context2.next = 20;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\tcase 14:\n\t\t\t\t\t\t\t\t\t\t\t_context2.prev = 14;\n\t\t\t\t\t\t\t\t\t\t\t_context2.t0 = _context2['catch'](8);\n\n\t\t\t\t\t\t\t\t\t\t\tif (!/Network Error|timeout/.test(_context2.t0)) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 18;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\treturn _context2.abrupt('return', {\n\t\t\t\t\t\t\t\t\t\t\t\tv: void 0\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tcase 18:\n\t\t\t\t\t\t\t\t\t\t\t// 网络中断载时\n\t\t\t\t\t\t\t\t\t\t\ttask.result = _context2.t0 + '';\n\t\t\t\t\t\t\t\t\t\t\tconsole.error(task.name, '开始检查是否在线失败', _context2.t0);\n\n\t\t\t\t\t\t\t\t\t\tcase 20:\n\t\t\t\t\t\t\t\t\t\t\tif (ok) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 31;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// 不在线，直接跳过\n\t\t\t\t\t\t\t\t\t\t\terr_cnt++;\n\n\t\t\t\t\t\t\t\t\t\t\tif (!(__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].notify_at + __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].notify_freq * 1e3 < now)) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 27;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// 距离上次不在线15分钟了\n\t\t\t\t\t\t\t\t\t\t\tnew Notification(task.name + '\\u4E0D\\u5728\\u7EBF', {\n\t\t\t\t\t\t\t\t\t\t\t\tbody: '点此去登录或禁用它',\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'chrome://favicon/https://' + task.domains[0]\n\t\t\t\t\t\t\t\t\t\t\t}).onclick = function () {\n\t\t\t\t\t\t\t\t\t\t\t\tchrome.tabs.create({ url: task.loginURL || '/pages/options.html' });\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].notify_at = now;\n\t\t\t\t\t\t\t\t\t\t\t_context2.next = 27;\n\t\t\t\t\t\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].syncSave({ config: __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */] });\n\n\t\t\t\t\t\t\t\t\t\tcase 27:\n\t\t\t\t\t\t\t\t\t\t\ttask.online_at = -now;\n\t\t\t\t\t\t\t\t\t\t\t_context2.next = 30;\n\t\t\t\t\t\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].setTask(task);\n\n\t\t\t\t\t\t\t\t\t\tcase 30:\n\t\t\t\t\t\t\t\t\t\t\treturn _context2.abrupt('return', 'continue');\n\n\t\t\t\t\t\t\t\t\t\tcase 31:\n\t\t\t\t\t\t\t\t\t\t\ttask.online_at = now;\n\n\t\t\t\t\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\t\t\t\t\tif (!__WEBPACK_IMPORTED_MODULE_4_dayjs___default()(task.success_at).isBefore(today)) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 37;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif (!(task.failure_at + __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].retry_freq * 1e3 <= new Date().getTime())) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 37;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// 运行失败后要歇10分钟\n\t\t\t\t\t\t\t\t\t\t\tchanged = true;\n\t\t\t\t\t\t\t\t\t\t\t_context2.next = 37;\n\t\t\t\t\t\t\t\t\t\t\treturn race(__WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].runTask(task));\n\n\t\t\t\t\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\t\t\t\t\t\tif (task.failure_at > task.success_at) err_cnt++;\n\n\t\t\t\t\t\t\t\t\t\t\tif (!changed) {\n\t\t\t\t\t\t\t\t\t\t\t\t_context2.next = 41;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t_context2.next = 41;\n\t\t\t\t\t\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].setTask(task);\n\n\t\t\t\t\t\t\t\t\t\tcase 41:\n\t\t\t\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\t\t\t\treturn _context2.stop();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, _loop, _this2, [[8, 14]]);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_iteratorNormalCompletion2 = true;\n\t\t\t\t\t\t_didIteratorError2 = false;\n\t\t\t\t\t\t_iteratorError2 = undefined;\n\t\t\t\t\t\t_context3.prev = 9;\n\t\t\t\t\t\t_iterator2 = tasks[Symbol.iterator]();\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\tif (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n\t\t\t\t\t\t\t_context3.next = 24;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttask = _step2.value;\n\t\t\t\t\t\treturn _context3.delegateYield(_loop(task), 't0', 14);\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\t_ret = _context3.t0;\n\t\t\t\t\t\t_context3.t1 = _ret;\n\t\t\t\t\t\t_context3.next = _context3.t1 === 'continue' ? 18 : 19;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 18:\n\t\t\t\t\t\treturn _context3.abrupt('continue', 21);\n\n\t\t\t\t\tcase 19:\n\t\t\t\t\t\tif (!((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\")) {\n\t\t\t\t\t\t\t_context3.next = 21;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn _context3.abrupt('return', _ret.v);\n\n\t\t\t\t\tcase 21:\n\t\t\t\t\t\t_iteratorNormalCompletion2 = true;\n\t\t\t\t\t\t_context3.next = 11;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 24:\n\t\t\t\t\t\t_context3.next = 30;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 26:\n\t\t\t\t\t\t_context3.prev = 26;\n\t\t\t\t\t\t_context3.t2 = _context3['catch'](9);\n\t\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t\t_iteratorError2 = _context3.t2;\n\n\t\t\t\t\tcase 30:\n\t\t\t\t\t\t_context3.prev = 30;\n\t\t\t\t\t\t_context3.prev = 31;\n\n\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcase 33:\n\t\t\t\t\t\t_context3.prev = 33;\n\n\t\t\t\t\t\tif (!_didIteratorError2) {\n\t\t\t\t\t\t\t_context3.next = 36;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow _iteratorError2;\n\n\t\t\t\t\tcase 36:\n\t\t\t\t\t\treturn _context3.finish(33);\n\n\t\t\t\t\tcase 37:\n\t\t\t\t\t\treturn _context3.finish(30);\n\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tif (err_cnt) {\n\t\t\t\t\t\t\tchrome.browserAction.setBadgeBackgroundColor({ color: '#F44336' });\n\t\t\t\t\t\t\tchrome.browserAction.setBadgeText({ text: err_cnt + '' });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tchrome.browserAction.setBadgeText({ text: '' });\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcase 39:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn _context3.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t}, _callee2, this, [[9, 26, 30, 38], [31,, 33, 37]]);\n\t}));\n\n\treturn function loop() {\n\t\treturn _ref3.apply(this, arguments);\n\t};\n}();\n\nvar upgrade = function () {\n\tvar _ref4 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee3() {\n\t\tvar now, tasks, li, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, task, _ref5, data, item, _changed, _arr, _i, k, title;\n\n\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context4) {\n\t\t\twhile (1) {\n\t\t\t\tswitch (_context4.prev = _context4.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tnow = Date.now();\n\n\t\t\t\t\t\tif (!(__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].upgrade_at + __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].upgrade_freq * 1e3 > now)) {\n\t\t\t\t\t\t\t_context4.next = 3;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn _context4.abrupt('return');\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tconsole.log('开始检查更新');\n\t\t\t\t\t\tnew Notification('开始检查并更新脚本');\n\t\t\t\t\t\t_context4.next = 7;\n\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].getTasks();\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\ttasks = _context4.sent;\n\t\t\t\t\t\tli = [];\n\t\t\t\t\t\t_iteratorNormalCompletion3 = true;\n\t\t\t\t\t\t_didIteratorError3 = false;\n\t\t\t\t\t\t_iteratorError3 = undefined;\n\t\t\t\t\t\t_context4.prev = 12;\n\t\t\t\t\t\t_iterator3 = tasks[Symbol.iterator]();\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\tif (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n\t\t\t\t\t\t\t_context4.next = 46;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttask = _step3.value;\n\n\t\t\t\t\t\tif (task.enable) {\n\t\t\t\t\t\t\t_context4.next = 18;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn _context4.abrupt('continue', 43);\n\n\t\t\t\t\tcase 18:\n\t\t\t\t\t\tif (!task.updateURL) {\n\t\t\t\t\t\t\t_context4.next = 43;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_context4.prev = 19;\n\t\t\t\t\t\t_context4.next = 22;\n\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].axios.get(task.updateURL);\n\n\t\t\t\t\tcase 22:\n\t\t\t\t\t\t_ref5 = _context4.sent;\n\t\t\t\t\t\tdata = _ref5.data;\n\t\t\t\t\t\titem = __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].compileTask(data);\n\t\t\t\t\t\t// TODO: 脚本增加 @minSDK 标记，以便插件版本低时不更新脚本\n\n\t\t\t\t\t\tif (!(0 < __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].compareVersions(item.version, task.version))) {\n\t\t\t\t\t\t\t_context4.next = 38;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_changed = false;\n\t\t\t\t\t\t_arr = ['author', 'name', 'grants', 'domains'];\n\t\t\t\t\t\t_i = 0;\n\n\t\t\t\t\tcase 29:\n\t\t\t\t\t\tif (!(_i < _arr.length)) {\n\t\t\t\t\t\t\t_context4.next = 37;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tk = _arr[_i];\n\n\t\t\t\t\t\tif (!(item[k] != task[k])) {\n\t\t\t\t\t\t\t_context4.next = 34;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_changed = true;\n\t\t\t\t\t\treturn _context4.abrupt('break', 37);\n\n\t\t\t\t\tcase 34:\n\t\t\t\t\t\t_i++;\n\t\t\t\t\t\t_context4.next = 29;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 37:\n\t\t\t\t\t\tif (_changed) chrome.tabs.create({ url: '/pages/options.html#' + task.updateURL });else {\n\t\t\t\t\t\t\tli.push(task.name);\n\t\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].addTask(tasks, item);\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\t_context4.next = 43;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 40:\n\t\t\t\t\t\t_context4.prev = 40;\n\t\t\t\t\t\t_context4.t0 = _context4['catch'](19);\n\n\t\t\t\t\t\tconsole.error(task.name, '更新失败');\n\n\t\t\t\t\tcase 43:\n\t\t\t\t\t\t_iteratorNormalCompletion3 = true;\n\t\t\t\t\t\t_context4.next = 14;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 46:\n\t\t\t\t\t\t_context4.next = 52;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 48:\n\t\t\t\t\t\t_context4.prev = 48;\n\t\t\t\t\t\t_context4.t1 = _context4['catch'](12);\n\t\t\t\t\t\t_didIteratorError3 = true;\n\t\t\t\t\t\t_iteratorError3 = _context4.t1;\n\n\t\t\t\t\tcase 52:\n\t\t\t\t\t\t_context4.prev = 52;\n\t\t\t\t\t\t_context4.prev = 53;\n\n\t\t\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t\t\t_iterator3.return();\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcase 55:\n\t\t\t\t\t\t_context4.prev = 55;\n\n\t\t\t\t\t\tif (!_didIteratorError3) {\n\t\t\t\t\t\t\t_context4.next = 58;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow _iteratorError3;\n\n\t\t\t\t\tcase 58:\n\t\t\t\t\t\treturn _context4.finish(55);\n\n\t\t\t\t\tcase 59:\n\t\t\t\t\t\treturn _context4.finish(52);\n\n\t\t\t\t\tcase 60:\n\t\t\t\t\t\tif (li.length) {\n\t\t\t\t\t\t\ttitle = li[0];\n\n\t\t\t\t\t\t\tif (li.length > 1) title += '\\u7B49' + li.length + '\\u4E2A\\u811A\\u672C';\n\t\t\t\t\t\t\tnew Notification(title + ' 升级成功').onclick = function () {\n\t\t\t\t\t\t\t\treturn chrome.tabs.create({ url: '/pages/options.html' });\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].upgrade_at = now;\n\t\t\t\t\t\t_context4.next = 64;\n\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].syncSave({ config: __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */] });\n\n\t\t\t\t\tcase 64:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn _context4.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t}, _callee3, this, [[12, 48, 52, 60], [19, 40], [53,, 55, 59]]);\n\t}));\n\n\treturn function upgrade() {\n\t\treturn _ref4.apply(this, arguments);\n\t};\n}();\n\nvar main = function () {\n\tvar _ref6 = _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4() {\n\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context5) {\n\t\t\twhile (1) {\n\t\t\t\tswitch (_context5.prev = _context5.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\t_context5.next = 2;\n\t\t\t\t\t\treturn init();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tif (false) {\n\t\t\t\t\t\t\t_context5.next = 18;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_context5.prev = 3;\n\t\t\t\t\t\t_context5.next = 6;\n\t\t\t\t\t\treturn loop();\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tif (!__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].upgrade) {\n\t\t\t\t\t\t\t_context5.next = 9;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_context5.next = 9;\n\t\t\t\t\t\treturn upgrade();\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\t_context5.next = 14;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\t_context5.prev = 11;\n\t\t\t\t\t\t_context5.t0 = _context5['catch'](3);\n\n\t\t\t\t\t\tconsole.error(_context5.t0);\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\t_context5.next = 16;\n\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].sleep(__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].loop_freq * 1e3);\n\n\t\t\t\t\tcase 16:\n\t\t\t\t\t\t_context5.next = 2;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 18:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn _context5.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t}, _callee4, this, [[3, 11]]);\n\t}));\n\n\treturn function main() {\n\t\treturn _ref6.apply(this, arguments);\n\t};\n}();\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step(\"next\", value); }, function (err) { step(\"throw\", err); }); } } return step(\"next\"); }); }; }\n\n\n\n\n\n\nchrome.runtime.onMessage.addListener(function (info, sender, cb) {\n\tvar _this = this;\n\n\t_asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n\t\tvar api, data;\n\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n\t\t\twhile (1) {\n\t\t\t\tswitch (_context.prev = _context.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tapi = __WEBPACK_IMPORTED_MODULE_3__backapi__[\"a\" /* default */][info.path];\n\n\t\t\t\t\t\tif (!api) {\n\t\t\t\t\t\t\t_context.next = 12;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_context.prev = 2;\n\t\t\t\t\t\t_context.next = 5;\n\t\t\t\t\t\treturn api(info.body);\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tdata = _context.sent;\n\t\t\t\t\t\treturn _context.abrupt('return', cb({ no: 200, data: data }));\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\t_context.prev = 9;\n\t\t\t\t\t\t_context.t0 = _context['catch'](2);\n\t\t\t\t\t\treturn _context.abrupt('return', cb({ no: 500, msg: _context.t0 }));\n\n\t\t\t\t\tcase 12:\n\t\t\t\t\t\treturn _context.abrupt('return', cb({ no: 404, msg: 'not found' }));\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn _context.stop();\n\t\t\t\t}\n\t\t\t}\n\t\t}, _callee, _this, [[2, 9]]);\n\t}))();\n\treturn true;\n});\n\nvar TAIL_KEYWORD = '#soulsign-install';\nchrome.tabs.onUpdated.addListener(function (tabId, tabInfo, tab) {\n\tif (tabInfo.url && tabInfo.url.endsWith(TAIL_KEYWORD)) {\n\t\tchrome.tabs.update(tabId, {\n\t\t\turl: chrome.runtime.getURL('/pages/options.html#' + tabInfo.url.slice(0, -TAIL_KEYWORD.length))\n\t\t});\n\t}\n\tif (!__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].donate) return;\n\tvar url = 'https://union-click.jd.com/jdc?e=&p=AyIGZRprFDJWWA1FBCVbV0IUWVALHFRBEwQAQB1AWQkrGn0HSFEFTit2UVZMFnwsQQsQWgtlOxkOIgdTGloXCxcGUxhrFQMTB1cZWxEGEDdlG1olSXwGZRhaFQEbDlIbWxEyEgNcGF0SChcOVhNcFTIVB1wrGUlAFwVUGVMUCiI3ZRhrJTISB2Uba0pGT1plGVoUBhs%3D';\n\tif (tabInfo.url && tabInfo.url.endsWith('//www.jd.com/')) {\n\t\tchrome.tabs.update(tabId, { url: url });\n\t}\n});\n\nfunction race(pms, ms) {\n\treturn Promise.race([__WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].sleep(ms || __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].timeout * 1e3), pms]);\n}\n\nfunction init() {\n\treturn new Promise(function (resolve, reject) {\n\t\tchrome.storage.sync.get('config', function (data) {\n\t\t\tif (!data || !data.config) {\n\t\t\t\t// 旧版本或者新安装，尝试升级\n\t\t\t\tchrome.storage.local.get(Object.keys(__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */]), function (data) {\n\t\t\t\t\tif (Object.keys(data).length) {\n\t\t\t\t\t\t// 旧版本\n\t\t\t\t\t\tconsole.log('旧版本升级');\n\t\t\t\t\t\tObject.assign(__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */], data);\n\t\t\t\t\t\tchrome.storage.local.get('tasks', function (_ref2) {\n\t\t\t\t\t\t\tvar tasks = _ref2.tasks;\n\n\t\t\t\t\t\t\tchrome.storage.local.clear(function () {\n\t\t\t\t\t\t\t\tchrome.storage.sync.set({ config: __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */] });\n\t\t\t\t\t\t\t\tvar sync = { tasks: [] };\n\t\t\t\t\t\t\t\tvar local = {};\n\t\t\t\t\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\t\t\t\t\tvar _didIteratorError = false;\n\t\t\t\t\t\t\t\tvar _iteratorError = undefined;\n\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tfor (var _iterator = tasks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\t\t\t\t\tvar task = _step.value;\n\n\t\t\t\t\t\t\t\t\t\tvar name = task.author + '/' + task.name;\n\t\t\t\t\t\t\t\t\t\tsync.tasks.push(name);\n\t\t\t\t\t\t\t\t\t\tlocal[name] = task;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t\t\t\t_iteratorError = err;\n\t\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tnew Notification('升级成功');\n\t\t\t\t\t\t\t\tresolve(Promise.all([__WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].localSave(local), __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].syncSave(sync)]));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 新安装\n\t\t\t\t\t\tconsole.log('新安装');\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tObject.assign(__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */], data.config);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t});\n}\n\nvar originMap = {};\n\nchrome.webRequest.onBeforeSendHeaders.addListener(function (details) {\n\tvar requestHeaders = details.requestHeaders;\n\tfor (var i = 0; i < requestHeaders.length; ++i) {\n\t\tvar header = requestHeaders[i];\n\t\tif (header.name === 'Origin') {\n\t\t\tif (!details.url.startsWith(header.value)) {\n\t\t\t\toriginMap[details.requestId] = header.value;\n\t\t\t}\n\t\t}\n\t}\n\t// 只有插件才加\n\tvar initiaor = details.initiator || details.documentUrl;\n\tif (!initiaor || !/^\\w+-extension:/.test(initiaor)) return;\n\tvar edit = false;\n\tfor (var i = 0; i < requestHeaders.length; ++i) {\n\t\tvar header = requestHeaders[i];\n\t\tif (header.name === \"_referer\") {\n\t\t\tedit = true;\n\t\t\tfor (var j = 0; j < requestHeaders.length; j++) {\n\t\t\t\tif (/^(Referer|_referer)$/.test(requestHeaders[j].name)) requestHeaders.splice(j--, 1);\n\t\t\t}\n\t\t\trequestHeaders.unshift({ name: \"Referer\", value: header.value });\n\t\t} else if (header.name === \"_origin\") {\n\t\t\tedit = true;\n\t\t\tfor (var _j = 0; _j < requestHeaders.length; _j++) {\n\t\t\t\tif (/^(Origin|_origin)$/.test(requestHeaders[_j].name)) requestHeaders.splice(_j--, 1);\n\t\t\t}\n\t\t\trequestHeaders.unshift({ name: \"Origin\", value: header.value });\n\t\t}\n\t}\n\tif (edit) return { requestHeaders: requestHeaders };\n}, { urls: [\"<all_urls>\"], types: ['xmlhttprequest'] }, __WEBPACK_IMPORTED_MODULE_2__utils__[\"a\" /* default */].isFirefox ? [\"blocking\", \"requestHeaders\"] : [\"blocking\", \"requestHeaders\", \"extraHeaders\"]);\n\nchrome.webRequest.onHeadersReceived.addListener(function (details) {\n\tif (!__WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].cross) return;\n\tvar origin = originMap[details.requestId];\n\tif (origin) {\n\t\tdelete originMap[details.requestId];\n\t\t// 只有跨域了才加\n\t\tvar flag = __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].allow_cross[details.initiator];\n\t\tif (!flag) return; // 不允许跨域\n\t\tvar responseHeaders = details.responseHeaders;\n\t\tfor (var i = 0; i < responseHeaders.length; ++i) {\n\t\t\tif (responseHeaders[i].name.toLowerCase() === 'access-control-allow-origin') {\n\t\t\t\t// 已经有了就不加了\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tresponseHeaders.push({ name: 'Access-Control-Allow-Origin', value: origin });\n\t\tif (flag & 2) responseHeaders.push({ name: 'Access-Control-Allow-Credentials', value: 'true' });\n\t\tresponseHeaders.push({ name: 'Access-Control-Allow-Headers', value: __WEBPACK_IMPORTED_MODULE_1__config__[\"a\" /* default */].cross_header });\n\t\treturn { responseHeaders: responseHeaders };\n\t}\n}, { urls: [\"<all_urls>\"], types: ['xmlhttprequest'] }, [\"blocking\", \"responseHeaders\"]);\n\nmain().catch(function (err) {\n\tconsole.log('\\u5D29\\u6E83', err);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTzNNdC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYmFja2VuZC9pbmRleC5qcz9iMjI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IGJhY2thcGkgZnJvbSAnLi9iYWNrYXBpJztcbmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7XG5cbmNocm9tZS5ydW50aW1lLm9uTWVzc2FnZS5hZGRMaXN0ZW5lcihmdW5jdGlvbihpbmZvLCBzZW5kZXIsIGNiKSB7XG5cdChhc3luYyAoKSA9PiB7XG5cdFx0bGV0IGFwaSA9IGJhY2thcGlbaW5mby5wYXRoXVxuXHRcdGlmIChhcGkpIHRyeSB7XG5cdFx0XHRsZXQgZGF0YSA9IGF3YWl0IGFwaShpbmZvLmJvZHkpO1xuXHRcdFx0cmV0dXJuIGNiKHsgbm86IDIwMCwgZGF0YSB9KTtcblx0XHR9IGNhdGNoIChtc2cpIHtcblx0XHRcdHJldHVybiBjYih7IG5vOiA1MDAsIG1zZyB9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGNiKHsgbm86IDQwNCwgbXNnOiAnbm90IGZvdW5kJyB9KTtcblx0fSkoKTtcblx0cmV0dXJuIHRydWU7XG59KVxuXG5jb25zdCBUQUlMX0tFWVdPUkQgPSAnI3NvdWxzaWduLWluc3RhbGwnO1xuY2hyb21lLnRhYnMub25VcGRhdGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKHRhYklkLCB0YWJJbmZvLCB0YWIpIHtcblx0aWYgKHRhYkluZm8udXJsICYmIHRhYkluZm8udXJsLmVuZHNXaXRoKFRBSUxfS0VZV09SRCkpIHtcblx0XHRjaHJvbWUudGFicy51cGRhdGUodGFiSWQsIHtcblx0XHRcdHVybDogY2hyb21lLnJ1bnRpbWUuZ2V0VVJMKCcvcGFnZXMvb3B0aW9ucy5odG1sIycgKyB0YWJJbmZvLnVybC5zbGljZSgwLCAtVEFJTF9LRVlXT1JELmxlbmd0aCkpXG5cdFx0fSlcblx0fVxuXHRpZiAoIWNvbmZpZy5kb25hdGUpIHJldHVybjtcblx0bGV0IHVybCA9ICdodHRwczovL3VuaW9uLWNsaWNrLmpkLmNvbS9qZGM/ZT0mcD1BeUlHWlJwckZESldXQTFGQkNWYlYwSVVXVkFMSEZSQkV3UUFRQjFBV1FrckduMEhTRkVGVGl0MlVWWk1GbndzUVFzUVdndGxPeGtPSWdkVEdsb1hDeGNHVXhockZRTVRCMWNaV3hFR0VEZGxHMW9sU1h3R1pSaGFGUUViRGxJYld4RXlFZ05jR0YwU0NoY09WaE5jRlRJVkIxd3JHVWxBRndWVUdWTVVDaUkzWlJockpUSVNCMlViYTBwR1QxcGxHVm9VQmhzJTNEJ1xuXHRpZiAodGFiSW5mby51cmwgJiYgdGFiSW5mby51cmwuZW5kc1dpdGgoJy8vd3d3LmpkLmNvbS8nKSkge1xuXHRcdGNocm9tZS50YWJzLnVwZGF0ZSh0YWJJZCwgeyB1cmwgfSk7XG5cdH1cbn0pXG5cbmZ1bmN0aW9uIHJhY2UocG1zLCBtcykge1xuXHRyZXR1cm4gUHJvbWlzZS5yYWNlKFt1dGlscy5zbGVlcChtcyB8fCAoY29uZmlnLnRpbWVvdXQgKiAxZTMpKSwgcG1zXSk7XG59XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRjaHJvbWUuc3RvcmFnZS5zeW5jLmdldCgnY29uZmlnJywgZnVuY3Rpb24oZGF0YSkge1xuXHRcdFx0aWYgKCFkYXRhIHx8ICFkYXRhLmNvbmZpZykgeyAvLyDml6fniYjmnKzmiJbogIXmlrDlronoo4XvvIzlsJ3or5XljYfnuqdcblx0XHRcdFx0Y2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KE9iamVjdC5rZXlzKGNvbmZpZyksIGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0XHRpZiAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoKSB7IC8vIOaXp+eJiOacrFxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ+aXp+eJiOacrOWNh+e6pycpO1xuXHRcdFx0XHRcdFx0T2JqZWN0LmFzc2lnbihjb25maWcsIGRhdGEpO1xuXHRcdFx0XHRcdFx0Y2hyb21lLnN0b3JhZ2UubG9jYWwuZ2V0KCd0YXNrcycsIGZ1bmN0aW9uKHsgdGFza3MgfSkge1xuXHRcdFx0XHRcdFx0XHRjaHJvbWUuc3RvcmFnZS5sb2NhbC5jbGVhcihmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRjaHJvbWUuc3RvcmFnZS5zeW5jLnNldCh7IGNvbmZpZyB9KTtcblx0XHRcdFx0XHRcdFx0XHRsZXQgc3luYyA9IHsgdGFza3M6IFtdIH1cblx0XHRcdFx0XHRcdFx0XHRsZXQgbG9jYWwgPSB7fVxuXHRcdFx0XHRcdFx0XHRcdGZvciAobGV0IHRhc2sgb2YgdGFza3MpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxldCBuYW1lID0gdGFzay5hdXRob3IgKyAnLycgKyB0YXNrLm5hbWU7XG5cdFx0XHRcdFx0XHRcdFx0XHRzeW5jLnRhc2tzLnB1c2gobmFtZSlcblx0XHRcdFx0XHRcdFx0XHRcdGxvY2FsW25hbWVdID0gdGFzaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0bmV3IE5vdGlmaWNhdGlvbign5Y2H57qn5oiQ5YqfJyk7XG5cdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZShQcm9taXNlLmFsbChbXG5cdFx0XHRcdFx0XHRcdFx0XHR1dGlscy5sb2NhbFNhdmUobG9jYWwpLFxuXHRcdFx0XHRcdFx0XHRcdFx0dXRpbHMuc3luY1NhdmUoc3luYyksXG5cdFx0XHRcdFx0XHRcdFx0XSkpXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdH0gZWxzZSB7IC8vIOaWsOWuieijhVxuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ+aWsOWuieijhScpO1xuXHRcdFx0XHRcdFx0cmVzb2x2ZSgpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdE9iamVjdC5hc3NpZ24oY29uZmlnLCBkYXRhLmNvbmZpZyk7XG5cdFx0XHRcdHJlc29sdmUoKVxuXHRcdFx0fVxuXHRcdH0pXG5cdH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBsb29wKCkge1xuXHRsZXQgdGFza3MgPSBhd2FpdCB1dGlscy5nZXRUYXNrcygpO1xuXHRsZXQgdG9kYXkgPSBkYXlqcygpLmFkZCgtY29uZmlnLmJlZ2luX2F0LCAnc2Vjb25kJykuc3RhcnRPZignZGF5JykuYWRkKGNvbmZpZy5iZWdpbl9hdCwgJ3NlY29uZCcpO1xuXHRsZXQgZXJyX2NudCA9IDA7XG5cdGZvciAobGV0IHRhc2sgb2YgdGFza3MpIHtcblx0XHRpZiAoIXRhc2suZW5hYmxlKSBjb250aW51ZTtcblx0XHRsZXQgY2hhbmdlZCA9IGZhbHNlO1xuXHRcdGlmICh0YXNrLmNoZWNrKSB7IC8vIOacieajgOafpeaYr+WQpuWcqOe6v+eahOWHveaVsFxuXHRcdFx0bGV0IG5vdyA9IERhdGUubm93KCk7XG5cdFx0XHRpZiAodGFzay5vbmxpbmVfYXQgKyB0YXNrLmV4cGlyZSA8IG5vdykgeyAvLyDmsqHmnInmo4Dmn6Xov4d85LmL5YmN5LiN5Zyo57q/fOWIsOS6huWGjeasoeajgOafpeaXtumXtOS6hlxuXHRcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdFx0bGV0IG9rID0gZmFsc2U7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0b2sgPSBhd2FpdCByYWNlKHRhc2suY2hlY2sodGFzay5fcGFyYW1zKSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdGlmICgvTmV0d29yayBFcnJvcnx0aW1lb3V0Ly50ZXN0KGVycikpIHJldHVybjsgLy8g572R57uc5Lit5pat6L295pe2XG5cdFx0XHRcdFx0dGFzay5yZXN1bHQgPSBlcnIgKyAnJztcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKHRhc2submFtZSwgJ+W8gOWni+ajgOafpeaYr+WQpuWcqOe6v+Wksei0pScsIGVycik7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFvaykgeyAvLyDkuI3lnKjnur/vvIznm7TmjqXot7Pov4dcblx0XHRcdFx0XHRlcnJfY250Kys7XG5cdFx0XHRcdFx0aWYgKGNvbmZpZy5ub3RpZnlfYXQgKyBjb25maWcubm90aWZ5X2ZyZXEgKiAxZTMgPCBub3cpIHtcblx0XHRcdFx0XHRcdC8vIOi3neemu+S4iuasoeS4jeWcqOe6vzE15YiG6ZKf5LqGXG5cdFx0XHRcdFx0XHRuZXcgTm90aWZpY2F0aW9uKGAke3Rhc2submFtZX3kuI3lnKjnur9gLCB7XG5cdFx0XHRcdFx0XHRcdGJvZHk6ICfngrnmraTljrvnmbvlvZXmiJbnpoHnlKjlroMnLFxuXHRcdFx0XHRcdFx0XHRpY29uOiBgY2hyb21lOi8vZmF2aWNvbi9odHRwczovLyR7dGFzay5kb21haW5zWzBdfWAsXG5cdFx0XHRcdFx0XHR9KS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdGNocm9tZS50YWJzLmNyZWF0ZSh7IHVybDogdGFzay5sb2dpblVSTCB8fCAnL3BhZ2VzL29wdGlvbnMuaHRtbCcgfSk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0Y29uZmlnLm5vdGlmeV9hdCA9IG5vdztcblx0XHRcdFx0XHRcdGF3YWl0IHV0aWxzLnN5bmNTYXZlKHsgY29uZmlnIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0YXNrLm9ubGluZV9hdCA9IC1ub3c7XG5cdFx0XHRcdFx0YXdhaXQgdXRpbHMuc2V0VGFzayh0YXNrKTtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0YXNrLm9ubGluZV9hdCA9IG5vdztcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGRheWpzKHRhc2suc3VjY2Vzc19hdCkuaXNCZWZvcmUodG9kYXkpKSB7XG5cdFx0XHQvLyDku4rlpKnmsqHmnInmiafooYzmiJDlip/ov4dcblx0XHRcdGlmICh0YXNrLmZhaWx1cmVfYXQgKyBjb25maWcucmV0cnlfZnJlcSAqIDFlMyA8PSBuZXcgRGF0ZSgpLmdldFRpbWUoKSkgeyAvLyDov5DooYzlpLHotKXlkI7opoHmrYcxMOWIhumSn1xuXHRcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdFx0YXdhaXQgcmFjZSh1dGlscy5ydW5UYXNrKHRhc2spKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKHRhc2suZmFpbHVyZV9hdCA+IHRhc2suc3VjY2Vzc19hdCkgZXJyX2NudCsrO1xuXHRcdGlmIChjaGFuZ2VkKSBhd2FpdCB1dGlscy5zZXRUYXNrKHRhc2spO1xuXHR9XG5cdGlmIChlcnJfY250KSB7XG5cdFx0Y2hyb21lLmJyb3dzZXJBY3Rpb24uc2V0QmFkZ2VCYWNrZ3JvdW5kQ29sb3IoeyBjb2xvcjogJyNGNDQzMzYnIH0pO1xuXHRcdGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlVGV4dCh7IHRleHQ6IGVycl9jbnQgKyAnJyB9KVxuXHR9IGVsc2Uge1xuXHRcdGNocm9tZS5icm93c2VyQWN0aW9uLnNldEJhZGdlVGV4dCh7IHRleHQ6ICcnIH0pXG5cdH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gdXBncmFkZSgpIHtcblx0bGV0IG5vdyA9IERhdGUubm93KCk7XG5cdGlmIChjb25maWcudXBncmFkZV9hdCArIChjb25maWcudXBncmFkZV9mcmVxICogMWUzKSA+IG5vdykgcmV0dXJuO1xuXHRjb25zb2xlLmxvZygn5byA5aeL5qOA5p+l5pu05pawJyk7XG5cdG5ldyBOb3RpZmljYXRpb24oJ+W8gOWni+ajgOafpeW5tuabtOaWsOiEmuacrCcpO1xuXHRsZXQgdGFza3MgPSBhd2FpdCB1dGlscy5nZXRUYXNrcygpO1xuXHRsZXQgbGkgPSBbXTtcblx0Zm9yIChsZXQgdGFzayBvZiB0YXNrcykge1xuXHRcdGlmICghdGFzay5lbmFibGUpIGNvbnRpbnVlO1xuXHRcdGlmICh0YXNrLnVwZGF0ZVVSTCkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0bGV0IHsgZGF0YSB9ID0gYXdhaXQgdXRpbHMuYXhpb3MuZ2V0KHRhc2sudXBkYXRlVVJMKTtcblx0XHRcdFx0bGV0IGl0ZW0gPSB1dGlscy5jb21waWxlVGFzayhkYXRhKTtcblx0XHRcdFx0Ly8gVE9ETzog6ISa5pys5aKe5YqgIEBtaW5TREsg5qCH6K6w77yM5Lul5L6/5o+S5Lu254mI5pys5L2O5pe25LiN5pu05paw6ISa5pysXG5cdFx0XHRcdGlmICgwIDwgdXRpbHMuY29tcGFyZVZlcnNpb25zKGl0ZW0udmVyc2lvbiwgdGFzay52ZXJzaW9uKSkge1xuXHRcdFx0XHRcdGxldCBjaGFuZ2VkID0gZmFsc2U7XG5cdFx0XHRcdFx0Zm9yIChsZXQgayBvZiBbJ2F1dGhvcicsICduYW1lJywgJ2dyYW50cycsICdkb21haW5zJ10pIHtcblx0XHRcdFx0XHRcdGlmIChpdGVtW2tdICE9IHRhc2tba10pIHtcblx0XHRcdFx0XHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoY2hhbmdlZClcblx0XHRcdFx0XHRcdGNocm9tZS50YWJzLmNyZWF0ZSh7IHVybDogJy9wYWdlcy9vcHRpb25zLmh0bWwjJyArIHRhc2sudXBkYXRlVVJMIH0pXG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRsaS5wdXNoKHRhc2submFtZSk7XG5cdFx0XHRcdFx0XHR1dGlscy5hZGRUYXNrKHRhc2tzLCBpdGVtKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IodGFzay5uYW1lLCAn5pu05paw5aSx6LSlJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGlmIChsaS5sZW5ndGgpIHtcblx0XHRsZXQgdGl0bGUgPSBsaVswXTtcblx0XHRpZiAobGkubGVuZ3RoID4gMSkgdGl0bGUgKz0gYOetiSR7bGkubGVuZ3RofeS4quiEmuacrGA7XG5cdFx0bmV3IE5vdGlmaWNhdGlvbih0aXRsZSArICcg5Y2H57qn5oiQ5YqfJykub25jbGljayA9ICgpID0+IGNocm9tZS50YWJzLmNyZWF0ZSh7IHVybDogJy9wYWdlcy9vcHRpb25zLmh0bWwnIH0pO1xuXHR9XG5cdGNvbmZpZy51cGdyYWRlX2F0ID0gbm93O1xuXHRhd2FpdCB1dGlscy5zeW5jU2F2ZSh7IGNvbmZpZyB9KTtcbn1cblxubGV0IG9yaWdpbk1hcCA9IHt9O1xuXG5jaHJvbWUud2ViUmVxdWVzdC5vbkJlZm9yZVNlbmRIZWFkZXJzLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGRldGFpbHMpIHtcblx0bGV0IHJlcXVlc3RIZWFkZXJzID0gZGV0YWlscy5yZXF1ZXN0SGVhZGVycztcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZXF1ZXN0SGVhZGVycy5sZW5ndGg7ICsraSkge1xuXHRcdHZhciBoZWFkZXIgPSByZXF1ZXN0SGVhZGVyc1tpXTtcblx0XHRpZiAoaGVhZGVyLm5hbWUgPT09ICdPcmlnaW4nKSB7XG5cdFx0XHRpZiAoIWRldGFpbHMudXJsLnN0YXJ0c1dpdGgoaGVhZGVyLnZhbHVlKSkge1xuXHRcdFx0XHRvcmlnaW5NYXBbZGV0YWlscy5yZXF1ZXN0SWRdID0gaGVhZGVyLnZhbHVlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHQvLyDlj6rmnInmj5Lku7bmiY3liqBcblx0dmFyIGluaXRpYW9yID0gZGV0YWlscy5pbml0aWF0b3IgfHwgZGV0YWlscy5kb2N1bWVudFVybFxuXHRpZiAoIWluaXRpYW9yIHx8ICEvXlxcdystZXh0ZW5zaW9uOi8udGVzdChpbml0aWFvcikpIHJldHVybjtcblx0dmFyIGVkaXQgPSBmYWxzZTtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCByZXF1ZXN0SGVhZGVycy5sZW5ndGg7ICsraSkge1xuXHRcdHZhciBoZWFkZXIgPSByZXF1ZXN0SGVhZGVyc1tpXTtcblx0XHRpZiAoaGVhZGVyLm5hbWUgPT09IFwiX3JlZmVyZXJcIikge1xuXHRcdFx0ZWRpdCA9IHRydWU7XG5cdFx0XHRmb3IgKGxldCBqID0gMDsgaiA8IHJlcXVlc3RIZWFkZXJzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGlmICgvXihSZWZlcmVyfF9yZWZlcmVyKSQvLnRlc3QocmVxdWVzdEhlYWRlcnNbal0ubmFtZSkpIHJlcXVlc3RIZWFkZXJzLnNwbGljZShqLS0sIDEpO1xuXHRcdFx0fVxuXHRcdFx0cmVxdWVzdEhlYWRlcnMudW5zaGlmdCh7bmFtZTogXCJSZWZlcmVyXCIsIHZhbHVlOiBoZWFkZXIudmFsdWV9KTtcblx0XHR9IGVsc2UgaWYgKGhlYWRlci5uYW1lID09PSBcIl9vcmlnaW5cIikge1xuXHRcdFx0ZWRpdCA9IHRydWU7XG5cdFx0XHRmb3IgKGxldCBqID0gMDsgaiA8IHJlcXVlc3RIZWFkZXJzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGlmICgvXihPcmlnaW58X29yaWdpbikkLy50ZXN0KHJlcXVlc3RIZWFkZXJzW2pdLm5hbWUpKSByZXF1ZXN0SGVhZGVycy5zcGxpY2Uoai0tLCAxKTtcblx0XHRcdH1cblx0XHRcdHJlcXVlc3RIZWFkZXJzLnVuc2hpZnQoe25hbWU6IFwiT3JpZ2luXCIsIHZhbHVlOiBoZWFkZXIudmFsdWV9KTtcblx0XHR9XG5cdH1cblx0aWYgKGVkaXQpIHJldHVybiB7cmVxdWVzdEhlYWRlcnN9O1xufSwgeyB1cmxzOiBbXCI8YWxsX3VybHM+XCJdLCB0eXBlczogWyd4bWxodHRwcmVxdWVzdCddIH0sIHV0aWxzLmlzRmlyZWZveCA/IFtcImJsb2NraW5nXCIsIFwicmVxdWVzdEhlYWRlcnNcIl0gOiBbXCJibG9ja2luZ1wiLCBcInJlcXVlc3RIZWFkZXJzXCIsIFwiZXh0cmFIZWFkZXJzXCJdKTtcblxuY2hyb21lLndlYlJlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24oZGV0YWlscykge1xuXHRpZiAoIWNvbmZpZy5jcm9zcykgcmV0dXJuO1xuXHRsZXQgb3JpZ2luID0gb3JpZ2luTWFwW2RldGFpbHMucmVxdWVzdElkXTtcblx0aWYgKG9yaWdpbikge1xuXHRcdGRlbGV0ZSBvcmlnaW5NYXBbZGV0YWlscy5yZXF1ZXN0SWRdO1xuXHRcdC8vIOWPquaciei3qOWfn+S6huaJjeWKoFxuXHRcdGxldCBmbGFnID0gY29uZmlnLmFsbG93X2Nyb3NzW2RldGFpbHMuaW5pdGlhdG9yXTtcblx0XHRpZiAoIWZsYWcpIHJldHVybjsgLy8g5LiN5YWB6K646Leo5Z+fXG5cdFx0bGV0IHJlc3BvbnNlSGVhZGVycyA9IGRldGFpbHMucmVzcG9uc2VIZWFkZXJzO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2VIZWFkZXJzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRpZiAocmVzcG9uc2VIZWFkZXJzW2ldLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2FjY2Vzcy1jb250cm9sLWFsbG93LW9yaWdpbicpIHtcblx0XHRcdFx0Ly8g5bey57uP5pyJ5LqG5bCx5LiN5Yqg5LqGXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmVzcG9uc2VIZWFkZXJzLnB1c2goeyBuYW1lOiAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgdmFsdWU6IG9yaWdpbiB9KTtcblx0XHRpZiAoZmxhZyAmIDIpIHJlc3BvbnNlSGVhZGVycy5wdXNoKHsgbmFtZTogJ0FjY2Vzcy1Db250cm9sLUFsbG93LUNyZWRlbnRpYWxzJywgdmFsdWU6ICd0cnVlJyB9KTtcblx0XHRyZXNwb25zZUhlYWRlcnMucHVzaCh7IG5hbWU6ICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgdmFsdWU6IGNvbmZpZy5jcm9zc19oZWFkZXIgfSk7XG5cdFx0cmV0dXJuIHsgcmVzcG9uc2VIZWFkZXJzIH07XG5cdH1cbn0sIHsgdXJsczogW1wiPGFsbF91cmxzPlwiXSwgdHlwZXM6IFsneG1saHR0cHJlcXVlc3QnXSB9LCBbXCJibG9ja2luZ1wiLCBcInJlc3BvbnNlSGVhZGVyc1wiXSk7XG5cbmFzeW5jIGZ1bmN0aW9uIG1haW4oKSB7XG5cdGF3YWl0IGluaXQoKTtcblx0d2hpbGUgKHRydWUpIHtcblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgbG9vcCgpO1xuXHRcdFx0aWYgKGNvbmZpZy51cGdyYWRlKSBhd2FpdCB1cGdyYWRlKCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdH1cblx0XHRhd2FpdCB1dGlscy5zbGVlcChjb25maWcubG9vcF9mcmVxICogMWUzKTtcblx0fVxufVxuXG5tYWluKCkuY2F0Y2goZXJyID0+IHtcblx0Y29uc29sZS5sb2coYOW0qea6g2AsIGVycik7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2JhY2tlbmQvaW5kZXguanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUEyRUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBTUE7QUFDQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFNQTtBQUNBO0FBQ0E7QUFUQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUNBO0FBWEE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWFBO0FBYkE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBbEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWtCQTtBQUNBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXFCQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBN0JBO0FBQUE7QUFDQTtBQURBO0FBZ0NBO0FBaENBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBb0NBO0FBQ0E7QUFyQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQXdDQTtBQUNBO0FBMUNBO0FBQUE7QUFDQTtBQURBO0FBOENBO0FBQ0E7QUEvQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBR0E7QUFKQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBaURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdkRBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTs7Ozs7O0FBeURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBSkE7QUFBQTtBQUNBO0FBREE7QUFLQTtBQUNBO0FBTkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBTUE7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFkQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBY0E7QUFmQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFlQTtBQUNBO0FBakJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFpQkE7QUFsQkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQXNCQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBNUJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUE2QkE7QUFDQTtBQS9CQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQWtDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUF2Q0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBOzs7Ozs7QUFvR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQU1BO0FBQ0E7QUFSQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBOzs7Ozs7O0FBeE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUhBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBUUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///O3Mt\n")},QmEn:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('var config = {\n\tversion: 10000,\n\t/** 通知时间 */\n\tnotify_at: 0,\n\t/** 检查更新时间 */\n\tupgrade_at: 0,\n\t/** 掉线通知频率(秒),默认10分钟 */\n\tnotify_freq: 600,\n\t/** 重试间隔时间(秒),默认10分钟 */\n\tretry_freq: 600,\n\t/** 任务循环间隔时间(秒) */\n\tloop_freq: 5,\n\t/** 每天几点开始签到,默认8点 */\n\tbegin_at: 28800,\n\t/** 是否自动更新 */\n\tupgrade: true,\n\t/** 检查更新间隔时间(秒) */\n\tupgrade_freq: 86400,\n\t/** 任务超时时间 */\n\ttimeout: 60,\n\tcross: true,\n\tallow_cross: {},\n\tcross_header: "",\n\t/** 开启捐赠, 跳转到京东返利链接 */\n\tdonate: false\n};\n\n/* harmony default export */ __webpack_exports__["a"] = (config);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUW1Fbi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYmFja2VuZC9jb25maWcuanM/NGJlZiJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgY29uZmlnID0ge1xuXHR2ZXJzaW9uOiAxMDAwMCxcblx0LyoqIOmAmuefpeaXtumXtCAqL1xuXHRub3RpZnlfYXQ6IDAsXG5cdC8qKiDmo4Dmn6Xmm7TmlrDml7bpl7QgKi9cblx0dXBncmFkZV9hdDogMCxcblx0LyoqIOaOiee6v+mAmuefpemikeeOhyjnp5IpLOm7mOiupDEw5YiG6ZKfICovXG5cdG5vdGlmeV9mcmVxOiA2MDAsXG5cdC8qKiDph43or5Xpl7TpmpTml7bpl7Qo56eSKSzpu5jorqQxMOWIhumSnyAqL1xuXHRyZXRyeV9mcmVxOiA2MDAsXG5cdC8qKiDku7vliqHlvqrnjq/pl7TpmpTml7bpl7Qo56eSKSAqL1xuXHRsb29wX2ZyZXE6IDUsXG5cdC8qKiDmr4/lpKnlh6DngrnlvIDlp4vnrb7liLAs6buY6K6kOOeCuSAqL1xuXHRiZWdpbl9hdDogMjg4MDAsXG5cdC8qKiDmmK/lkKboh6rliqjmm7TmlrAgKi9cblx0dXBncmFkZTogdHJ1ZSxcblx0LyoqIOajgOafpeabtOaWsOmXtOmalOaXtumXtCjnp5IpICovXG5cdHVwZ3JhZGVfZnJlcTogODY0MDAsXG5cdC8qKiDku7vliqHotoXml7bml7bpl7QgKi9cblx0dGltZW91dDogNjAsXG5cdGNyb3NzOiB0cnVlLFxuXHRhbGxvd19jcm9zczoge30sXG5cdGNyb3NzX2hlYWRlcjogXCJcIixcblx0LyoqIOW8gOWQr+aNkOi1oCwg6Lez6L2s5Yiw5Lqs5Lic6L+U5Yip6ZO+5o6lICovXG5cdGRvbmF0ZTogZmFsc2UsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBjb25maWc7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2JhY2tlbmQvY29uZmlnLmpzIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXhCQTtBQUNBO0FBMEJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///QmEn\n')},jliz:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (immutable) */ __webpack_exports__["b"] = frameRunner;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__ = __webpack_require__("Xxa5");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios__ = __webpack_require__("mtWM");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_axios___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_axios__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils__ = __webpack_require__("8jN1");\n\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _asyncToGenerator(fn) { return function () { var gen = fn.apply(this, arguments); return new Promise(function (resolve, reject) { function step(key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { return Promise.resolve(value).then(function (value) { step("next", value); }, function (err) { step("throw", err); }); } } return step("next"); }); }; }\n\n/**\n * 生成安全的脚本\n */\n\n\n\nvar evt = document.createElement("div");\nchrome.tabs.onUpdated.addListener(function (tabId, info) {\n\tvar event = new CustomEvent(tabId + ":" + info.status, { detail: info });\n\tevt.dispatchEvent(event);\n});\n\nfunction checkDomain(domains, url) {\n\tvar m = /https?:\\/\\/([^:\\/]+)/.exec(url);\n\tif (!m) return false;\n\tvar ss = m[1].split(".");\n\treturn domains.reduce(function (a, b) {\n\t\tif (a) return true;\n\t\tif ("*" == b) return true;\n\t\tvar dd = b.split(".");\n\t\tif (dd.length != ss.length) return false;\n\t\tfor (var i = 0; i < ss.length; i++) {\n\t\t\tif (dd[i] != "*" && ss[i] != dd[i]) return false;\n\t\t}\n\t\treturn true;\n\t}, false);\n}\n\nfunction frameRunner(tabId, frameId, domains, url) {\n\treturn {\n\t\turl: url,\n\t\teval: function _eval(code) {\n\t\t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\t\targs[_key - 1] = arguments[_key];\n\t\t\t}\n\n\t\t\tif (typeof code === "function") code = "(" + code + ")(" + args.map(function (x) {\n\t\t\t\treturn JSON.stringify(x);\n\t\t\t}) + ");";\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tchrome.tabs.executeScript(tabId, { code: code, frameId: frameId, runAt: "document_end", matchAboutBlank: true }, function (result) {\n\t\t\t\t\tresolve(result && result[0]);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tinject: function inject(code) {\n\t\t\tfor (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n\t\t\t\targs[_key2 - 1] = arguments[_key2];\n\t\t\t}\n\n\t\t\tif (typeof code === "function") code = "(" + code + ")(" + args.map(function (x) {\n\t\t\t\treturn JSON.stringify(x);\n\t\t\t}) + ");";\n\t\t\treturn this.eval(function (code) {\n\t\t\t\tvar s = document.createElement("script");\n\t\t\t\ts.setAttribute("soulsign", "");\n\t\t\t\ts.innerHTML = code;\n\t\t\t\tconsole.log(document.head, document.documentElement);\n\t\t\t\t(document.documentElement || document.head).appendChild(s);\n\t\t\t}, code);\n\t\t},\n\t\twaitLoaded: function waitLoaded() {\n\t\t\tvar timeout = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10e3;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tfunction fn() {\n\t\t\t\t\tresolve(true);\n\t\t\t\t\tevt.removeEventListener(tabId + ":complete", fn);\n\t\t\t\t}\n\t\t\t\tevt.addEventListener(tabId + ":complete", fn);\n\t\t\t\tif (timeout > 0) setTimeout(function () {\n\t\t\t\t\tresolve(false);\n\t\t\t\t\tevt.removeEventListener(tabId + ":complete", fn);\n\t\t\t\t}, timeout);\n\t\t\t});\n\t\t},\n\t\twaitUntil: function waitUntil(selector) {\n\t\t\tvar _this = this;\n\n\t\t\tvar retryCount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\t\t\treturn _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee() {\n\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee$(_context) {\n\t\t\t\t\twhile (1) {\n\t\t\t\t\t\tswitch (_context.prev = _context.next) {\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\tif (!(--retryCount >= 0)) {\n\t\t\t\t\t\t\t\t\t_context.next = 9;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_context.next = 3;\n\t\t\t\t\t\t\t\treturn _this.eval(function (s) {\n\t\t\t\t\t\t\t\t\treturn !!document.querySelector(s);\n\t\t\t\t\t\t\t\t}, selector);\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tif (!_context.sent) {\n\t\t\t\t\t\t\t\t\t_context.next = 5;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn _context.abrupt("return", true);\n\n\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\t_context.next = 7;\n\t\t\t\t\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_2__utils__["a" /* default */].sleep(1e3);\n\n\t\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\t\t\t_context.next = 0;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 9:\n\t\t\t\t\t\t\t\t_context.next = 11;\n\t\t\t\t\t\t\t\treturn _this.eval(function (s) {\n\t\t\t\t\t\t\t\t\treturn !!document.querySelector(s);\n\t\t\t\t\t\t\t\t}, selector);\n\n\t\t\t\t\t\t\tcase 11:\n\t\t\t\t\t\t\t\treturn _context.abrupt("return", _context.sent);\n\n\t\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\tcase "end":\n\t\t\t\t\t\t\t\treturn _context.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, _callee, _this);\n\t\t\t}))();\n\t\t},\n\t\tclick: function click(selector) {\n\t\t\tvar _this2 = this;\n\n\t\t\tvar waitCount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\t\t\treturn _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee2() {\n\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee2$(_context2) {\n\t\t\t\t\twhile (1) {\n\t\t\t\t\t\tswitch (_context2.prev = _context2.next) {\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t_context2.next = 2;\n\t\t\t\t\t\t\t\treturn _this2.waitUntil(selector, waitCount);\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tif (!_context2.sent) {\n\t\t\t\t\t\t\t\t\t_context2.next = 6;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_context2.next = 5;\n\t\t\t\t\t\t\t\treturn _this2.eval(function (s) {\n\t\t\t\t\t\t\t\t\treturn document.querySelector(s).click();\n\t\t\t\t\t\t\t\t}, selector);\n\n\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\treturn _context2.abrupt("return", true);\n\n\t\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\t\treturn _context2.abrupt("return", false);\n\n\t\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\t\tcase "end":\n\t\t\t\t\t\t\t\treturn _context2.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, _callee2, _this2);\n\t\t\t}))();\n\t\t},\n\t\tvalue: function value(selector, _value) {\n\t\t\tvar _this3 = this;\n\n\t\t\tvar waitCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n\t\t\treturn _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee3() {\n\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee3$(_context3) {\n\t\t\t\t\twhile (1) {\n\t\t\t\t\t\tswitch (_context3.prev = _context3.next) {\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t_context3.next = 2;\n\t\t\t\t\t\t\t\treturn _this3.waitUntil(selector, waitCount);\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tif (!_context3.sent) {\n\t\t\t\t\t\t\t\t\t_context3.next = 6;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_context3.next = 5;\n\t\t\t\t\t\t\t\treturn _this3.eval(function (s, v) {\n\t\t\t\t\t\t\t\t\treturn document.querySelector(s).value = v;\n\t\t\t\t\t\t\t\t}, selector, _value);\n\n\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\treturn _context3.abrupt("return", true);\n\n\t\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\t\treturn _context3.abrupt("return", false);\n\n\t\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\t\tcase "end":\n\t\t\t\t\t\t\t\treturn _context3.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, _callee3, _this3);\n\t\t\t}))();\n\t\t},\n\t\tpress: function press(selector, value) {\n\t\t\tvar _this4 = this;\n\n\t\t\tvar waitCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n\t\t\treturn _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee4() {\n\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee4$(_context4) {\n\t\t\t\t\twhile (1) {\n\t\t\t\t\t\tswitch (_context4.prev = _context4.next) {\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\tif (typeof value === "number") value = { keyCode: value };\n\n\t\t\t\t\t\t\t\tif (!(!value.keyCode && !value.charCode)) {\n\t\t\t\t\t\t\t\t\t_context4.next = 3;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthrow "keypress need keyCode";\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_context4.next = 5;\n\t\t\t\t\t\t\t\treturn _this4.waitUntil(selector, waitCount);\n\n\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\tif (!_context4.sent) {\n\t\t\t\t\t\t\t\t\t_context4.next = 9;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_context4.next = 8;\n\t\t\t\t\t\t\t\treturn _this4.eval(function press(s, v) {\n\t\t\t\t\t\t\t\t\tif (typeof v === "number") v = { keyCode: v };\n\t\t\t\t\t\t\t\t\tvar el = typeof s === "string" ? document.querySelector(s) : s;\n\t\t\t\t\t\t\t\t\t["keydown", "keypress", "keyup"].forEach(function (type, i) {\n\t\t\t\t\t\t\t\t\t\tvar keyboardEvent = document.createEvent("KeyboardEvent");\n\t\t\t\t\t\t\t\t\t\tkeyboardEvent[keyboardEvent.initKeyboardEvent ? "initKeyboardEvent" : "initKeyEvent"](type, // event type: keydown, keyup, keypress\n\t\t\t\t\t\t\t\t\t\ttrue, // bubbles\n\t\t\t\t\t\t\t\t\t\ttrue, // cancelable\n\t\t\t\t\t\t\t\t\t\twindow, // view: should be window\n\t\t\t\t\t\t\t\t\t\tv.ctrlKey || false, // ctrlKey\n\t\t\t\t\t\t\t\t\t\tv.altKey || false, // altKey\n\t\t\t\t\t\t\t\t\t\tv.shiftKey || false, // shiftKey\n\t\t\t\t\t\t\t\t\t\tv.metaKey || false, // metaKey\n\t\t\t\t\t\t\t\t\t\tv.keyCode || 0, // keyCode: unsigned long - the virtual key code, else 0\n\t\t\t\t\t\t\t\t\t\tv.charCode || 0 // charCode: unsigned long - the Unicode character associated with the depressed key, else 0\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tel.dispatchEvent(keyboardEvent);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (v.keyCode == 13) {\n\t\t\t\t\t\t\t\t\t\tvar p = el.parentElement;\n\t\t\t\t\t\t\t\t\t\twhile (p) {\n\t\t\t\t\t\t\t\t\t\t\tif (p.tagName == "FORM") {\n\t\t\t\t\t\t\t\t\t\t\t\tp.submit();\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tp = p.parentElement;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, selector, value);\n\n\t\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\t\treturn _context4.abrupt("return", true);\n\n\t\t\t\t\t\t\tcase 9:\n\t\t\t\t\t\t\t\treturn _context4.abrupt("return", false);\n\n\t\t\t\t\t\t\tcase 10:\n\t\t\t\t\t\t\tcase "end":\n\t\t\t\t\t\t\t\treturn _context4.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, _callee4, _this4);\n\t\t\t}))();\n\t\t},\n\t\tiframes: function iframes() {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tchrome.webNavigation.getAllFrames({ tabId: tabId }, function (details) {\n\t\t\t\t\tresolve(details.filter(function (x) {\n\t\t\t\t\t\treturn checkDomain(domains, x.url);\n\t\t\t\t\t}).map(function (x) {\n\t\t\t\t\t\treturn frameRunner(tabId, x.frameId, domains, x.url);\n\t\t\t\t\t}));\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsleep: function sleep(ms) {\n\t\t\treturn new Promise(function (resolve) {\n\t\t\t\treturn setTimeout(resolve, ms);\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * @param {string} url\n   * @param {number} fuzzy 模糊匹配模式 3: 匹配host, 2 : 匹配path, 1: 严格匹配, 0: 最佳匹配\n   * @param {number} [waitCount=10]\n   */\n\t\tgetFrame: function getFrame(url, fuzzy) {\n\t\t\tvar _this5 = this;\n\n\t\t\tvar waitCount = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n\t\t\treturn _asyncToGenerator( /*#__PURE__*/__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function _callee5() {\n\t\t\t\tvar urlHost, urlPath, frames, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, item, _iteratorNormalCompletion2, _didIteratorError2, _iteratorError2, _iterator2, _step2, _item, _iteratorNormalCompletion3, _didIteratorError3, _iteratorError3, _iterator3, _step3, _item2, _iteratorNormalCompletion4, _didIteratorError4, _iteratorError4, _iterator4, _step4, _item3;\n\n\t\t\t\treturn __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function _callee5$(_context5) {\n\t\t\t\t\twhile (1) {\n\t\t\t\t\t\tswitch (_context5.prev = _context5.next) {\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\tfuzzy = fuzzy || 0;\n\t\t\t\t\t\t\t\turlHost = url.replace(/^(https?:\\/\\/[^\\/]+)[\\s\\S]*$/, "$1");\n\t\t\t\t\t\t\t\turlPath = url.split("?")[0];\n\n\t\t\t\t\t\t\t\tif (fuzzy > 2) url = urlHost;else if (fuzzy > 1) url = urlPath;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tif (false) {\n\t\t\t\t\t\t\t\t\t_context5.next = 123;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_context5.next = 7;\n\t\t\t\t\t\t\t\treturn _this5.iframes();\n\n\t\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\t\t\tframes = _context5.sent;\n\n\t\t\t\t\t\t\t\tif (!(!fuzzy || fuzzy == 1)) {\n\t\t\t\t\t\t\t\t\t_context5.next = 35;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t\t\t\t_didIteratorError = false;\n\t\t\t\t\t\t\t\t_iteratorError = undefined;\n\t\t\t\t\t\t\t\t_context5.prev = 12;\n\t\t\t\t\t\t\t\t_iterator = frames[Symbol.iterator]();\n\n\t\t\t\t\t\t\tcase 14:\n\t\t\t\t\t\t\t\tif (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n\t\t\t\t\t\t\t\t\t_context5.next = 21;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\titem = _step.value;\n\n\t\t\t\t\t\t\t\tif (!(item.url == url)) {\n\t\t\t\t\t\t\t\t\t_context5.next = 18;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn _context5.abrupt("return", item);\n\n\t\t\t\t\t\t\tcase 18:\n\t\t\t\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t\t\t\t_context5.next = 14;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 21:\n\t\t\t\t\t\t\t\t_context5.next = 27;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 23:\n\t\t\t\t\t\t\t\t_context5.prev = 23;\n\t\t\t\t\t\t\t\t_context5.t0 = _context5["catch"](12);\n\t\t\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t\t\t_iteratorError = _context5.t0;\n\n\t\t\t\t\t\t\tcase 27:\n\t\t\t\t\t\t\t\t_context5.prev = 27;\n\t\t\t\t\t\t\t\t_context5.prev = 28;\n\n\t\t\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase 30:\n\t\t\t\t\t\t\t\t_context5.prev = 30;\n\n\t\t\t\t\t\t\t\tif (!_didIteratorError) {\n\t\t\t\t\t\t\t\t\t_context5.next = 33;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthrow _iteratorError;\n\n\t\t\t\t\t\t\tcase 33:\n\t\t\t\t\t\t\t\treturn _context5.finish(30);\n\n\t\t\t\t\t\t\tcase 34:\n\t\t\t\t\t\t\t\treturn _context5.finish(27);\n\n\t\t\t\t\t\t\tcase 35:\n\t\t\t\t\t\t\t\tif (!(fuzzy > 1)) {\n\t\t\t\t\t\t\t\t\t_context5.next = 64;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_iteratorNormalCompletion2 = true;\n\t\t\t\t\t\t\t\t_didIteratorError2 = false;\n\t\t\t\t\t\t\t\t_iteratorError2 = undefined;\n\t\t\t\t\t\t\t\t_context5.prev = 39;\n\t\t\t\t\t\t\t\t_iterator2 = frames[Symbol.iterator]();\n\n\t\t\t\t\t\t\tcase 41:\n\t\t\t\t\t\t\t\tif (_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done) {\n\t\t\t\t\t\t\t\t\t_context5.next = 48;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_item = _step2.value;\n\n\t\t\t\t\t\t\t\tif (!_item.url.startsWith(url)) {\n\t\t\t\t\t\t\t\t\t_context5.next = 45;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn _context5.abrupt("return", _item);\n\n\t\t\t\t\t\t\tcase 45:\n\t\t\t\t\t\t\t\t_iteratorNormalCompletion2 = true;\n\t\t\t\t\t\t\t\t_context5.next = 41;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 48:\n\t\t\t\t\t\t\t\t_context5.next = 54;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 50:\n\t\t\t\t\t\t\t\t_context5.prev = 50;\n\t\t\t\t\t\t\t\t_context5.t1 = _context5["catch"](39);\n\t\t\t\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t\t\t\t_iteratorError2 = _context5.t1;\n\n\t\t\t\t\t\t\tcase 54:\n\t\t\t\t\t\t\t\t_context5.prev = 54;\n\t\t\t\t\t\t\t\t_context5.prev = 55;\n\n\t\t\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t\t\t\t\t_iterator2.return();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase 57:\n\t\t\t\t\t\t\t\t_context5.prev = 57;\n\n\t\t\t\t\t\t\t\tif (!_didIteratorError2) {\n\t\t\t\t\t\t\t\t\t_context5.next = 60;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthrow _iteratorError2;\n\n\t\t\t\t\t\t\tcase 60:\n\t\t\t\t\t\t\t\treturn _context5.finish(57);\n\n\t\t\t\t\t\t\tcase 61:\n\t\t\t\t\t\t\t\treturn _context5.finish(54);\n\n\t\t\t\t\t\t\tcase 62:\n\t\t\t\t\t\t\t\t_context5.next = 117;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 64:\n\t\t\t\t\t\t\t\tif (fuzzy) {\n\t\t\t\t\t\t\t\t\t_context5.next = 117;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_iteratorNormalCompletion3 = true;\n\t\t\t\t\t\t\t\t_didIteratorError3 = false;\n\t\t\t\t\t\t\t\t_iteratorError3 = undefined;\n\t\t\t\t\t\t\t\t_context5.prev = 68;\n\t\t\t\t\t\t\t\t_iterator3 = frames[Symbol.iterator]();\n\n\t\t\t\t\t\t\tcase 70:\n\t\t\t\t\t\t\t\tif (_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done) {\n\t\t\t\t\t\t\t\t\t_context5.next = 77;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_item2 = _step3.value;\n\n\t\t\t\t\t\t\t\tif (!_item2.url.startsWith(urlPath)) {\n\t\t\t\t\t\t\t\t\t_context5.next = 74;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn _context5.abrupt("return", _item2);\n\n\t\t\t\t\t\t\tcase 74:\n\t\t\t\t\t\t\t\t_iteratorNormalCompletion3 = true;\n\t\t\t\t\t\t\t\t_context5.next = 70;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 77:\n\t\t\t\t\t\t\t\t_context5.next = 83;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 79:\n\t\t\t\t\t\t\t\t_context5.prev = 79;\n\t\t\t\t\t\t\t\t_context5.t2 = _context5["catch"](68);\n\t\t\t\t\t\t\t\t_didIteratorError3 = true;\n\t\t\t\t\t\t\t\t_iteratorError3 = _context5.t2;\n\n\t\t\t\t\t\t\tcase 83:\n\t\t\t\t\t\t\t\t_context5.prev = 83;\n\t\t\t\t\t\t\t\t_context5.prev = 84;\n\n\t\t\t\t\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t\t\t\t\t_iterator3.return();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase 86:\n\t\t\t\t\t\t\t\t_context5.prev = 86;\n\n\t\t\t\t\t\t\t\tif (!_didIteratorError3) {\n\t\t\t\t\t\t\t\t\t_context5.next = 89;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthrow _iteratorError3;\n\n\t\t\t\t\t\t\tcase 89:\n\t\t\t\t\t\t\t\treturn _context5.finish(86);\n\n\t\t\t\t\t\t\tcase 90:\n\t\t\t\t\t\t\t\treturn _context5.finish(83);\n\n\t\t\t\t\t\t\tcase 91:\n\t\t\t\t\t\t\t\t_iteratorNormalCompletion4 = true;\n\t\t\t\t\t\t\t\t_didIteratorError4 = false;\n\t\t\t\t\t\t\t\t_iteratorError4 = undefined;\n\t\t\t\t\t\t\t\t_context5.prev = 94;\n\t\t\t\t\t\t\t\t_iterator4 = frames[Symbol.iterator]();\n\n\t\t\t\t\t\t\tcase 96:\n\t\t\t\t\t\t\t\tif (_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done) {\n\t\t\t\t\t\t\t\t\t_context5.next = 103;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t_item3 = _step4.value;\n\n\t\t\t\t\t\t\t\tif (!_item3.url.startsWith(urlHost)) {\n\t\t\t\t\t\t\t\t\t_context5.next = 100;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn _context5.abrupt("return", _item3);\n\n\t\t\t\t\t\t\tcase 100:\n\t\t\t\t\t\t\t\t_iteratorNormalCompletion4 = true;\n\t\t\t\t\t\t\t\t_context5.next = 96;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 103:\n\t\t\t\t\t\t\t\t_context5.next = 109;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 105:\n\t\t\t\t\t\t\t\t_context5.prev = 105;\n\t\t\t\t\t\t\t\t_context5.t3 = _context5["catch"](94);\n\t\t\t\t\t\t\t\t_didIteratorError4 = true;\n\t\t\t\t\t\t\t\t_iteratorError4 = _context5.t3;\n\n\t\t\t\t\t\t\tcase 109:\n\t\t\t\t\t\t\t\t_context5.prev = 109;\n\t\t\t\t\t\t\t\t_context5.prev = 110;\n\n\t\t\t\t\t\t\t\tif (!_iteratorNormalCompletion4 && _iterator4.return) {\n\t\t\t\t\t\t\t\t\t_iterator4.return();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcase 112:\n\t\t\t\t\t\t\t\t_context5.prev = 112;\n\n\t\t\t\t\t\t\t\tif (!_didIteratorError4) {\n\t\t\t\t\t\t\t\t\t_context5.next = 115;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthrow _iteratorError4;\n\n\t\t\t\t\t\t\tcase 115:\n\t\t\t\t\t\t\t\treturn _context5.finish(112);\n\n\t\t\t\t\t\t\tcase 116:\n\t\t\t\t\t\t\t\treturn _context5.finish(109);\n\n\t\t\t\t\t\t\tcase 117:\n\t\t\t\t\t\t\t\tif (!(--waitCount < 1)) {\n\t\t\t\t\t\t\t\t\t_context5.next = 119;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn _context5.abrupt("break", 123);\n\n\t\t\t\t\t\t\tcase 119:\n\t\t\t\t\t\t\t\t_context5.next = 121;\n\t\t\t\t\t\t\t\treturn _this5.sleep(1e3);\n\n\t\t\t\t\t\t\tcase 121:\n\t\t\t\t\t\t\t\t_context5.next = 4;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 123:\n\t\t\t\t\t\t\t\tconsole.error("no match url: " + url);\n\t\t\t\t\t\t\t\treturn _context5.abrupt("return", _this5);\n\n\t\t\t\t\t\t\tcase 125:\n\t\t\t\t\t\t\tcase "end":\n\t\t\t\t\t\t\t\treturn _context5.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, _callee5, _this5, [[12, 23, 27, 35], [28,, 30, 34], [39, 50, 54, 62], [55,, 57, 61], [68, 79, 83, 91], [84,, 86, 90], [94, 105, 109, 117], [110,, 112, 116]]);\n\t\t\t}))();\n\t\t}\n\t};\n}\n\n/**\n *\n * @param {soulsign.Task} task 脚本允许访问的\n */\n/* harmony default export */ __webpack_exports__["a"] = (function (task) {\n\tvar request = __WEBPACK_IMPORTED_MODULE_1_axios___default.a.create({ timeout: 10e3 });\n\tvar domains = task.domains.concat();\n\trequest.interceptors.request.use(function (config) {\n\t\tif (!checkDomain(domains, config.url)) return Promise.reject("domain\\u914D\\u7F6E\\u4E0D\\u6B63\\u786E");\n\t\tif (config.headers) {\n\t\t\tif (config.headers["Referer"]) {\n\t\t\t\tconfig.headers["_referer"] = config.headers["Referer"];\n\t\t\t\tdelete config.headers["Referer"];\n\t\t\t} else if (config.headers["referer"]) {\n\t\t\t\tconfig.headers["_referer"] = config.headers["referer"];\n\t\t\t\tdelete config.headers["referer"];\n\t\t\t}\n\t\t\tif (config.headers["Origin"]) {\n\t\t\t\tconfig.headers["_origin"] = config.headers["Origin"];\n\t\t\t\tdelete config.headers["Origin"];\n\t\t\t} else if (config.headers["origin"]) {\n\t\t\t\tconfig.headers["_origin"] = config.headers["origin"];\n\t\t\t\tdelete config.headers["origin"];\n\t\t\t}\n\t\t}\n\t\treturn config;\n\t});\n\tvar grant = new Set(task.grants);\n\tvar inject = {\n\t\taxios: request,\n\t\ttools: __WEBPACK_IMPORTED_MODULE_2__utils__["a" /* default */].extTask(),\n\t\t/**\n   * 引入第三方JS脚本\n   * @param {string} url\n   */\n\t\trequire: function require(url) {\n\t\t\tif (!grant.has("require")) return Promise.reject("需要@grant require");\n\t\t\treturn __WEBPACK_IMPORTED_MODULE_1_axios___default.a.get(url, { validateStatus: function validateStatus() {\n\t\t\t\t\treturn true;\n\t\t\t\t} }).then(function (_ref) {\n\t\t\t\tvar data = _ref.data;\n\n\t\t\t\tvar module = { exports: {} };\n\t\t\t\tnew Function("exports", "module", data)(module.exports, module);\n\t\t\t\treturn module.exports;\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * 获取指定url指定名字的cookie\n   * @param {string} url\n   * @param {string} name\n   */\n\t\tgetCookie: function getCookie(url, name) {\n\t\t\tif (!grant.has("cookie")) return Promise.reject("需要@grant cookie");\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tchrome.cookies.get({ url: url, name: name }, function (x) {\n\t\t\t\t\treturn resolve(x && x.value);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\n\t\t/**\n   * 设置指定url指定名字的cookie\n   * @param {string} url\n   * @param {string} name\n   * @param {string} value\n   */\n\t\tsetCookie: function setCookie(url, name, value) {\n\t\t\tif (!grant.has("cookie")) return Promise.reject("需要@grant cookie");\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tchrome.cookies.set({ url: url, name: name, value: value }, function (x) {\n\t\t\t\t\treturn resolve(x && x.value);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t$: function $(html) {\n\t\t\tvar div = document.createElement("div");\n\t\t\tdiv.innerHTML = html;\n\t\t\treturn div.childNodes.length > 1 ? Array.from(div.childNodes) : div.childNodes[0];\n\t\t},\n\t\tnotify: function notify(body, url, timeout) {\n\t\t\tif (!grant.has("notify")) throw "需要@grant notify";\n\t\t\tvar n = new Notification(task.name, {\n\t\t\t\tbody: body,\n\t\t\t\ticon: "chrome://favicon/https://" + task.domains[0]\n\t\t\t});\n\t\t\tn.onclick = function () {\n\t\t\t\tthis.close();\n\t\t\t\tif (url) chrome.tabs.create({ url: url });\n\t\t\t};\n\t\t\tsetTimeout(function () {\n\t\t\t\tn.close();\n\t\t\t}, timeout || 300e3);\n\t\t},\n\t\topenWindow: function openWindow(url, dev, fn, preload) {\n\t\t\tif (!checkDomain(domains, url)) return Promise.reject("domain\\u914D\\u7F6E\\u4E0D\\u6B63\\u786E");\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tchrome.windows.create(dev ? { left: 0, top: 0, width: window.screen.availWidth, height: window.screen.availHeight, focused: dev, type: "normal" } : { state: "minimized", focused: false, type: "normal" }, function (w) {\n\t\t\t\t\tif (!dev) chrome.windows.update(w.id, { state: "minimized", drawAttention: false, focused: false });\n\t\t\t\t\tinject.openTab(url, true, fn, preload, w.id).then(resolve, reject).finally(function () {\n\t\t\t\t\t\treturn chrome.windows.remove(w.id);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\topenTab: function openTab(url, dev, fn, preload, windowId) {\n\t\t\tif (!checkDomain(domains, url)) return Promise.reject("domain\\u914D\\u7F6E\\u4E0D\\u6B63\\u786E");\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tchrome.tabs.create({ url: url, active: dev, windowId: windowId }, function (tab) {\n\t\t\t\t\tvar pms = Promise.resolve();\n\t\t\t\t\tif (preload) {\n\t\t\t\t\t\tif (typeof preload === "function") preload = "(" + preload + ")();";\n\t\t\t\t\t\tpms = new Promise(function (resolve, reject) {\n\t\t\t\t\t\t\tchrome.cookies.set({ url: url, name: "__soulsign_inject__", value: encodeURIComponent(preload) }, resolve);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tpms.then(function () {\n\t\t\t\t\t\treturn frameRunner(tab.id, 0, domains, url);\n\t\t\t\t\t}).then(function (x) {\n\t\t\t\t\t\treturn x.waitLoaded().then(function () {\n\t\t\t\t\t\t\treturn x;\n\t\t\t\t\t\t});\n\t\t\t\t\t}).then(fn).then(resolve, reject).finally(function () {\n\t\t\t\t\t\treturn chrome.tabs.remove(tab.id);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\topen: function open(url, dev, fn, preload) {\n\t\t\tif (!checkDomain(domains, url)) return Promise.reject("domain\\u914D\\u7F6E\\u4E0D\\u6B63\\u786E");\n\t\t\tif (/macintosh|mac os x/i.test(navigator.userAgent)) return inject.openWindow(url, dev, fn, preload);\n\t\t\treturn inject.openTab(url, dev, fn, preload);\n\t\t},\n\t\tshowInNewTab: function showInNewTab(title, data) {\n\t\t\tvar html = "`<title>" + task.name + " - " + title + "</title><div>" + data + "</div>`";\n\t\t\tchrome.tabs.create({ url: "javascript:document.write(" + html + ");" });\n\t\t}\n\t};\n\tif (!grant.has("eval")) {\n\t\t// 脚本中屏蔽以下内容\n\t\tObject.assign(inject, {\n\t\t\twindow: undefined,\n\t\t\tdocument: undefined,\n\t\t\tNotification: undefined,\n\t\t\tlocation: undefined,\n\t\t\teval: undefined,\n\t\t\tFunction: undefined,\n\t\t\tchrome: undefined,\n\t\t\tglobalThis: undefined\n\t\t});\n\t}\n\tvar inject_keys = Object.keys(inject);\n\tvar inject_values = Object.values(inject);\n\ttask = Object.assign({}, __WEBPACK_IMPORTED_MODULE_2__utils__["a" /* default */].TASK_EXT, task);\n\tvar module = { exports: {} };\n\tnew (Function.prototype.bind.apply(Function, [null].concat(["exports", "module"], _toConsumableArray(inject_keys), [task.code])))().apply(undefined, [module.exports, module].concat(_toConsumableArray(inject_values)));\n\ttask.check = module.exports.check;\n\ttask.run = module.exports.run;\n\treturn task;\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiamxpei5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYmFja2VuZC9zY3JpcHRidWlsZC5qcz80YzdlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICog55Sf5oiQ5a6J5YWo55qE6ISa5pysXG4gKi9cbmltcG9ydCBheGlvcyBmcm9tIFwiYXhpb3NcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiLi91dGlsc1wiO1xuXG5jb25zdCBldnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuY2hyb21lLnRhYnMub25VcGRhdGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKHRhYklkLCBpbmZvKSB7XG5cdGxldCBldmVudCA9IG5ldyBDdXN0b21FdmVudCh0YWJJZCArIFwiOlwiICsgaW5mby5zdGF0dXMsIHtkZXRhaWw6IGluZm99KTtcblx0ZXZ0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xufSk7XG5cbmZ1bmN0aW9uIGNoZWNrRG9tYWluKGRvbWFpbnMsIHVybCkge1xuXHRsZXQgbSA9IC9odHRwcz86XFwvXFwvKFteOlxcL10rKS8uZXhlYyh1cmwpO1xuXHRpZiAoIW0pIHJldHVybiBmYWxzZTtcblx0bGV0IHNzID0gbVsxXS5zcGxpdChcIi5cIik7XG5cdHJldHVybiBkb21haW5zLnJlZHVjZShmdW5jdGlvbihhLCBiKSB7XG5cdFx0aWYgKGEpIHJldHVybiB0cnVlO1xuXHRcdGlmIChcIipcIiA9PSBiKSByZXR1cm4gdHJ1ZTtcblx0XHRsZXQgZGQgPSBiLnNwbGl0KFwiLlwiKTtcblx0XHRpZiAoZGQubGVuZ3RoICE9IHNzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdGlmIChkZFtpXSAhPSBcIipcIiAmJiBzc1tpXSAhPSBkZFtpXSkgcmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSwgZmFsc2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJhbWVSdW5uZXIodGFiSWQsIGZyYW1lSWQsIGRvbWFpbnMsIHVybCkge1xuXHRyZXR1cm4ge1xuXHRcdHVybCxcblx0XHRldmFsKGNvZGUsIC4uLmFyZ3MpIHtcblx0XHRcdGlmICh0eXBlb2YgY29kZSA9PT0gXCJmdW5jdGlvblwiKSBjb2RlID0gYCgke2NvZGV9KSgke2FyZ3MubWFwKCh4KSA9PiBKU09OLnN0cmluZ2lmeSh4KSl9KTtgO1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRjaHJvbWUudGFicy5leGVjdXRlU2NyaXB0KHRhYklkLCB7Y29kZSwgZnJhbWVJZCwgcnVuQXQ6IFwiZG9jdW1lbnRfZW5kXCIsIG1hdGNoQWJvdXRCbGFuazogdHJ1ZX0sIGZ1bmN0aW9uKHJlc3VsdCkge1xuXHRcdFx0XHRcdHJlc29sdmUocmVzdWx0ICYmIHJlc3VsdFswXSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRpbmplY3QoY29kZSwgLi4uYXJncykge1xuXHRcdFx0aWYgKHR5cGVvZiBjb2RlID09PSBcImZ1bmN0aW9uXCIpIGNvZGUgPSBgKCR7Y29kZX0pKCR7YXJncy5tYXAoKHgpID0+IEpTT04uc3RyaW5naWZ5KHgpKX0pO2A7XG5cdFx0XHRyZXR1cm4gdGhpcy5ldmFsKGZ1bmN0aW9uKGNvZGUpIHtcblx0XHRcdFx0dmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuXHRcdFx0XHRzLnNldEF0dHJpYnV0ZShcInNvdWxzaWduXCIsIFwiXCIpO1xuXHRcdFx0XHRzLmlubmVySFRNTCA9IGNvZGU7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGRvY3VtZW50LmhlYWQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG5cdFx0XHRcdChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHwgZG9jdW1lbnQuaGVhZCkuYXBwZW5kQ2hpbGQocyk7XG5cdFx0XHR9LCBjb2RlKTtcblx0XHR9LFxuXHRcdHdhaXRMb2FkZWQodGltZW91dCA9IDEwZTMpIHtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0ZnVuY3Rpb24gZm4oKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZSh0cnVlKTtcblx0XHRcdFx0XHRldnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0YWJJZCArIFwiOmNvbXBsZXRlXCIsIGZuKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRldnQuYWRkRXZlbnRMaXN0ZW5lcih0YWJJZCArIFwiOmNvbXBsZXRlXCIsIGZuKTtcblx0XHRcdFx0aWYgKHRpbWVvdXQgPiAwKVxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXNvbHZlKGZhbHNlKTtcblx0XHRcdFx0XHRcdGV2dC5yZW1vdmVFdmVudExpc3RlbmVyKHRhYklkICsgXCI6Y29tcGxldGVcIiwgZm4pO1xuXHRcdFx0XHRcdH0sIHRpbWVvdXQpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRhc3luYyB3YWl0VW50aWwoc2VsZWN0b3IsIHJldHJ5Q291bnQgPSAxMCkge1xuXHRcdFx0d2hpbGUgKC0tcmV0cnlDb3VudCA+PSAwKSB7XG5cdFx0XHRcdGlmIChhd2FpdCB0aGlzLmV2YWwoKHMpID0+ICEhZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSwgc2VsZWN0b3IpKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0YXdhaXQgdXRpbHMuc2xlZXAoMWUzKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBhd2FpdCB0aGlzLmV2YWwoKHMpID0+ICEhZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSwgc2VsZWN0b3IpO1xuXHRcdH0sXG5cdFx0YXN5bmMgY2xpY2soc2VsZWN0b3IsIHdhaXRDb3VudCA9IDEwKSB7XG5cdFx0XHRpZiAoYXdhaXQgdGhpcy53YWl0VW50aWwoc2VsZWN0b3IsIHdhaXRDb3VudCkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5ldmFsKChzKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpLmNsaWNrKCksIHNlbGVjdG9yKTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblx0XHRhc3luYyB2YWx1ZShzZWxlY3RvciwgdmFsdWUsIHdhaXRDb3VudCA9IDEwKSB7XG5cdFx0XHRpZiAoYXdhaXQgdGhpcy53YWl0VW50aWwoc2VsZWN0b3IsIHdhaXRDb3VudCkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5ldmFsKChzLCB2KSA9PiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKS52YWx1ZSA9IHYpLCBzZWxlY3RvciwgdmFsdWUpO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9LFxuXHRcdGFzeW5jIHByZXNzKHNlbGVjdG9yLCB2YWx1ZSwgd2FpdENvdW50ID0gMTApIHtcblx0XHRcdGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHZhbHVlID0ge2tleUNvZGU6IHZhbHVlfTtcblx0XHRcdGlmICghdmFsdWUua2V5Q29kZSAmJiAhdmFsdWUuY2hhckNvZGUpIHRocm93IFwia2V5cHJlc3MgbmVlZCBrZXlDb2RlXCI7XG5cdFx0XHRpZiAoYXdhaXQgdGhpcy53YWl0VW50aWwoc2VsZWN0b3IsIHdhaXRDb3VudCkpIHtcblx0XHRcdFx0YXdhaXQgdGhpcy5ldmFsKFxuXHRcdFx0XHRcdGZ1bmN0aW9uIHByZXNzKHMsIHYpIHtcblx0XHRcdFx0XHRcdGlmICh0eXBlb2YgdiA9PT0gXCJudW1iZXJcIikgdiA9IHtrZXlDb2RlOiB2fTtcblx0XHRcdFx0XHRcdGxldCBlbCA9IHR5cGVvZiBzID09PSBcInN0cmluZ1wiID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSA6IHM7XG5cdFx0XHRcdFx0XHRbXCJrZXlkb3duXCIsIFwia2V5cHJlc3NcIiwgXCJrZXl1cFwiXS5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUsIGkpIHtcblx0XHRcdFx0XHRcdFx0dmFyIGtleWJvYXJkRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIktleWJvYXJkRXZlbnRcIik7XG5cdFx0XHRcdFx0XHRcdGtleWJvYXJkRXZlbnRba2V5Ym9hcmRFdmVudC5pbml0S2V5Ym9hcmRFdmVudCA/IFwiaW5pdEtleWJvYXJkRXZlbnRcIiA6IFwiaW5pdEtleUV2ZW50XCJdKFxuXHRcdFx0XHRcdFx0XHRcdHR5cGUsIC8vIGV2ZW50IHR5cGU6IGtleWRvd24sIGtleXVwLCBrZXlwcmVzc1xuXHRcdFx0XHRcdFx0XHRcdHRydWUsIC8vIGJ1YmJsZXNcblx0XHRcdFx0XHRcdFx0XHR0cnVlLCAvLyBjYW5jZWxhYmxlXG5cdFx0XHRcdFx0XHRcdFx0d2luZG93LCAvLyB2aWV3OiBzaG91bGQgYmUgd2luZG93XG5cdFx0XHRcdFx0XHRcdFx0di5jdHJsS2V5IHx8IGZhbHNlLCAvLyBjdHJsS2V5XG5cdFx0XHRcdFx0XHRcdFx0di5hbHRLZXkgfHwgZmFsc2UsIC8vIGFsdEtleVxuXHRcdFx0XHRcdFx0XHRcdHYuc2hpZnRLZXkgfHwgZmFsc2UsIC8vIHNoaWZ0S2V5XG5cdFx0XHRcdFx0XHRcdFx0di5tZXRhS2V5IHx8IGZhbHNlLCAvLyBtZXRhS2V5XG5cdFx0XHRcdFx0XHRcdFx0di5rZXlDb2RlIHx8IDAsIC8vIGtleUNvZGU6IHVuc2lnbmVkIGxvbmcgLSB0aGUgdmlydHVhbCBrZXkgY29kZSwgZWxzZSAwXG5cdFx0XHRcdFx0XHRcdFx0di5jaGFyQ29kZSB8fCAwIC8vIGNoYXJDb2RlOiB1bnNpZ25lZCBsb25nIC0gdGhlIFVuaWNvZGUgY2hhcmFjdGVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgZGVwcmVzc2VkIGtleSwgZWxzZSAwXG5cdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdGVsLmRpc3BhdGNoRXZlbnQoa2V5Ym9hcmRFdmVudCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGlmICh2LmtleUNvZGUgPT0gMTMpIHtcblx0XHRcdFx0XHRcdFx0bGV0IHAgPSBlbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAocCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChwLnRhZ05hbWUgPT0gXCJGT1JNXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHAuc3VibWl0KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cCA9IHAucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0c2VsZWN0b3IsXG5cdFx0XHRcdFx0dmFsdWVcblx0XHRcdFx0KTtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblx0XHRpZnJhbWVzKCkge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRjaHJvbWUud2ViTmF2aWdhdGlvbi5nZXRBbGxGcmFtZXMoe3RhYklkOiB0YWJJZH0sIGZ1bmN0aW9uKGRldGFpbHMpIHtcblx0XHRcdFx0XHRyZXNvbHZlKGRldGFpbHMuZmlsdGVyKCh4KSA9PiBjaGVja0RvbWFpbihkb21haW5zLCB4LnVybCkpLm1hcCgoeCkgPT4gZnJhbWVSdW5uZXIodGFiSWQsIHguZnJhbWVJZCwgZG9tYWlucywgeC51cmwpKSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRzbGVlcChtcykge1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IGZ1enp5IOaooeeziuWMuemFjeaooeW8jyAzOiDljLnphY1ob3N0LCAyIDog5Yy56YWNcGF0aCwgMTog5Lil5qC85Yy56YWNLCAwOiDmnIDkvbPljLnphY1cblx0XHQgKiBAcGFyYW0ge251bWJlcn0gW3dhaXRDb3VudD0xMF1cblx0XHQgKi9cblx0XHRhc3luYyBnZXRGcmFtZSh1cmwsIGZ1enp5LCB3YWl0Q291bnQgPSAxMCkge1xuXHRcdFx0ZnV6enkgPSBmdXp6eSB8fCAwO1xuXHRcdFx0bGV0IHVybEhvc3QgPSB1cmwucmVwbGFjZSgvXihodHRwcz86XFwvXFwvW15cXC9dKylbXFxzXFxTXSokLywgXCIkMVwiKTtcblx0XHRcdGxldCB1cmxQYXRoID0gdXJsLnNwbGl0KFwiP1wiKVswXTtcblx0XHRcdGlmIChmdXp6eSA+IDIpIHVybCA9IHVybEhvc3Q7XG5cdFx0XHRlbHNlIGlmIChmdXp6eSA+IDEpIHVybCA9IHVybFBhdGg7XG5cdFx0XHR3aGlsZSAodHJ1ZSkge1xuXHRcdFx0XHRsZXQgZnJhbWVzID0gYXdhaXQgdGhpcy5pZnJhbWVzKCk7XG5cdFx0XHRcdGlmICghZnV6enkgfHwgZnV6enkgPT0gMSkge1xuXHRcdFx0XHRcdGZvciAobGV0IGl0ZW0gb2YgZnJhbWVzKSB7XG5cdFx0XHRcdFx0XHRpZiAoaXRlbS51cmwgPT0gdXJsKSByZXR1cm4gaXRlbTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGZ1enp5ID4gMSkge1xuXHRcdFx0XHRcdGZvciAobGV0IGl0ZW0gb2YgZnJhbWVzKSB7XG5cdFx0XHRcdFx0XHRpZiAoaXRlbS51cmwuc3RhcnRzV2l0aCh1cmwpKSByZXR1cm4gaXRlbTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoIWZ1enp5KSB7XG5cdFx0XHRcdFx0Zm9yIChsZXQgaXRlbSBvZiBmcmFtZXMpIHtcblx0XHRcdFx0XHRcdGlmIChpdGVtLnVybC5zdGFydHNXaXRoKHVybFBhdGgpKSByZXR1cm4gaXRlbTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Zm9yIChsZXQgaXRlbSBvZiBmcmFtZXMpIHtcblx0XHRcdFx0XHRcdGlmIChpdGVtLnVybC5zdGFydHNXaXRoKHVybEhvc3QpKSByZXR1cm4gaXRlbTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKC0td2FpdENvdW50IDwgMSkgYnJlYWs7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc2xlZXAoMWUzKTtcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUuZXJyb3IoXCJubyBtYXRjaCB1cmw6IFwiICsgdXJsKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH0sXG5cdH07XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7c291bHNpZ24uVGFza30gdGFzayDohJrmnKzlhYHorrjorr/pl67nmoRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odGFzaykge1xuXHRsZXQgcmVxdWVzdCA9IGF4aW9zLmNyZWF0ZSh7dGltZW91dDogMTBlM30pO1xuXHRjb25zdCBkb21haW5zID0gdGFzay5kb21haW5zLmNvbmNhdCgpO1xuXHRyZXF1ZXN0LmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbihjb25maWcpIHtcblx0XHRpZiAoIWNoZWNrRG9tYWluKGRvbWFpbnMsIGNvbmZpZy51cmwpKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoYGRvbWFpbumFjee9ruS4jeato+ehrmApO1xuXHRcdGlmIChjb25maWcuaGVhZGVycykge1xuXHRcdFx0aWYgKGNvbmZpZy5oZWFkZXJzW1wiUmVmZXJlclwiXSkge1xuXHRcdFx0XHRjb25maWcuaGVhZGVyc1tcIl9yZWZlcmVyXCJdID0gY29uZmlnLmhlYWRlcnNbXCJSZWZlcmVyXCJdO1xuXHRcdFx0XHRkZWxldGUgY29uZmlnLmhlYWRlcnNbXCJSZWZlcmVyXCJdO1xuXHRcdFx0fSBlbHNlIGlmIChjb25maWcuaGVhZGVyc1tcInJlZmVyZXJcIl0pIHtcblx0XHRcdFx0Y29uZmlnLmhlYWRlcnNbXCJfcmVmZXJlclwiXSA9IGNvbmZpZy5oZWFkZXJzW1wicmVmZXJlclwiXTtcblx0XHRcdFx0ZGVsZXRlIGNvbmZpZy5oZWFkZXJzW1wicmVmZXJlclwiXTtcblx0XHRcdH1cblx0XHRcdGlmIChjb25maWcuaGVhZGVyc1tcIk9yaWdpblwiXSkge1xuXHRcdFx0XHRjb25maWcuaGVhZGVyc1tcIl9vcmlnaW5cIl0gPSBjb25maWcuaGVhZGVyc1tcIk9yaWdpblwiXTtcblx0XHRcdFx0ZGVsZXRlIGNvbmZpZy5oZWFkZXJzW1wiT3JpZ2luXCJdO1xuXHRcdFx0fSBlbHNlIGlmIChjb25maWcuaGVhZGVyc1tcIm9yaWdpblwiXSkge1xuXHRcdFx0XHRjb25maWcuaGVhZGVyc1tcIl9vcmlnaW5cIl0gPSBjb25maWcuaGVhZGVyc1tcIm9yaWdpblwiXTtcblx0XHRcdFx0ZGVsZXRlIGNvbmZpZy5oZWFkZXJzW1wib3JpZ2luXCJdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY29uZmlnO1xuXHR9KTtcblx0bGV0IGdyYW50ID0gbmV3IFNldCh0YXNrLmdyYW50cyk7XG5cdGxldCBpbmplY3QgPSB7XG5cdFx0YXhpb3M6IHJlcXVlc3QsXG5cdFx0dG9vbHM6IHV0aWxzLmV4dFRhc2soKSxcblx0XHQvKipcblx0XHQgKiDlvJXlhaXnrKzkuInmlrlKU+iEmuacrFxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcblx0XHQgKi9cblx0XHRyZXF1aXJlKHVybCkge1xuXHRcdFx0aWYgKCFncmFudC5oYXMoXCJyZXF1aXJlXCIpKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCLpnIDopoFAZ3JhbnQgcmVxdWlyZVwiKTtcblx0XHRcdHJldHVybiBheGlvcy5nZXQodXJsLCB7dmFsaWRhdGVTdGF0dXM6ICgpID0+IHRydWV9KS50aGVuKGZ1bmN0aW9uKHtkYXRhfSkge1xuXHRcdFx0XHRsZXQgbW9kdWxlID0ge2V4cG9ydHM6IHt9fTtcblx0XHRcdFx0bmV3IEZ1bmN0aW9uKFwiZXhwb3J0c1wiLCBcIm1vZHVsZVwiLCBkYXRhKShtb2R1bGUuZXhwb3J0cywgbW9kdWxlKTtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiDojrflj5bmjIflrpp1cmzmjIflrprlkI3lrZfnmoRjb29raWVcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcblx0XHQgKi9cblx0XHRnZXRDb29raWUodXJsLCBuYW1lKSB7XG5cdFx0XHRpZiAoIWdyYW50LmhhcyhcImNvb2tpZVwiKSkgcmV0dXJuIFByb21pc2UucmVqZWN0KFwi6ZyA6KaBQGdyYW50IGNvb2tpZVwiKTtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGNocm9tZS5jb29raWVzLmdldCh7dXJsLCBuYW1lfSwgKHgpID0+IHJlc29sdmUoeCAmJiB4LnZhbHVlKSk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIOiuvue9ruaMh+WumnVybOaMh+WumuWQjeWtl+eahGNvb2tpZVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuXHRcdCAqL1xuXHRcdHNldENvb2tpZSh1cmwsIG5hbWUsIHZhbHVlKSB7XG5cdFx0XHRpZiAoIWdyYW50LmhhcyhcImNvb2tpZVwiKSkgcmV0dXJuIFByb21pc2UucmVqZWN0KFwi6ZyA6KaBQGdyYW50IGNvb2tpZVwiKTtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRcdGNocm9tZS5jb29raWVzLnNldCh7dXJsLCBuYW1lLCB2YWx1ZX0sICh4KSA9PiByZXNvbHZlKHggJiYgeC52YWx1ZSkpO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHQkKGh0bWwpIHtcblx0XHRcdHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXHRcdFx0ZGl2LmlubmVySFRNTCA9IGh0bWw7XG5cdFx0XHRyZXR1cm4gZGl2LmNoaWxkTm9kZXMubGVuZ3RoID4gMSA/IEFycmF5LmZyb20oZGl2LmNoaWxkTm9kZXMpIDogZGl2LmNoaWxkTm9kZXNbMF07XG5cdFx0fSxcblx0XHRub3RpZnkoYm9keSwgdXJsLCB0aW1lb3V0KSB7XG5cdFx0XHRpZiAoIWdyYW50LmhhcyhcIm5vdGlmeVwiKSkgdGhyb3cgXCLpnIDopoFAZ3JhbnQgbm90aWZ5XCI7XG5cdFx0XHRsZXQgbiA9IG5ldyBOb3RpZmljYXRpb24odGFzay5uYW1lLCB7XG5cdFx0XHRcdGJvZHksXG5cdFx0XHRcdGljb246IFwiY2hyb21lOi8vZmF2aWNvbi9odHRwczovL1wiICsgdGFzay5kb21haW5zWzBdLFxuXHRcdFx0fSk7XG5cdFx0XHRuLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRpZiAodXJsKSBjaHJvbWUudGFicy5jcmVhdGUoe3VybH0pO1xuXHRcdFx0fTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdG4uY2xvc2UoKTtcblx0XHRcdH0sIHRpbWVvdXQgfHwgMzAwZTMpO1xuXHRcdH0sXG5cdFx0b3BlbldpbmRvdyh1cmwsIGRldiwgZm4sIHByZWxvYWQpIHtcblx0XHRcdGlmICghY2hlY2tEb21haW4oZG9tYWlucywgdXJsKSkgcmV0dXJuIFByb21pc2UucmVqZWN0KGBkb21haW7phY3nva7kuI3mraPnoa5gKTtcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0XHRcdFx0Y2hyb21lLndpbmRvd3MuY3JlYXRlKFxuXHRcdFx0XHRcdGRldlxuXHRcdFx0XHRcdFx0PyB7bGVmdDogMCwgdG9wOiAwLCB3aWR0aDogd2luZG93LnNjcmVlbi5hdmFpbFdpZHRoLCBoZWlnaHQ6IHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQsIGZvY3VzZWQ6IGRldiwgdHlwZTogXCJub3JtYWxcIn1cblx0XHRcdFx0XHRcdDoge3N0YXRlOiBcIm1pbmltaXplZFwiLCBmb2N1c2VkOiBmYWxzZSwgdHlwZTogXCJub3JtYWxcIn0sXG5cdFx0XHRcdFx0ZnVuY3Rpb24odykge1xuXHRcdFx0XHRcdFx0aWYgKCFkZXYpIGNocm9tZS53aW5kb3dzLnVwZGF0ZSh3LmlkLCB7c3RhdGU6IFwibWluaW1pemVkXCIsIGRyYXdBdHRlbnRpb246IGZhbHNlLCBmb2N1c2VkOiBmYWxzZX0pO1xuXHRcdFx0XHRcdFx0aW5qZWN0XG5cdFx0XHRcdFx0XHRcdC5vcGVuVGFiKHVybCwgdHJ1ZSwgZm4sIHByZWxvYWQsIHcuaWQpXG5cdFx0XHRcdFx0XHRcdC50aGVuKHJlc29sdmUsIHJlamVjdClcblx0XHRcdFx0XHRcdFx0LmZpbmFsbHkoKCkgPT4gY2hyb21lLndpbmRvd3MucmVtb3ZlKHcuaWQpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdG9wZW5UYWIodXJsLCBkZXYsIGZuLCBwcmVsb2FkLCB3aW5kb3dJZCkge1xuXHRcdFx0aWYgKCFjaGVja0RvbWFpbihkb21haW5zLCB1cmwpKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoYGRvbWFpbumFjee9ruS4jeato+ehrmApO1xuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdFx0XHRjaHJvbWUudGFicy5jcmVhdGUoe3VybCwgYWN0aXZlOiBkZXYsIHdpbmRvd0lkfSwgZnVuY3Rpb24odGFiKSB7XG5cdFx0XHRcdFx0bGV0IHBtcyA9IFByb21pc2UucmVzb2x2ZSgpO1xuXHRcdFx0XHRcdGlmIChwcmVsb2FkKSB7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIHByZWxvYWQgPT09IFwiZnVuY3Rpb25cIikgcHJlbG9hZCA9IGAoJHtwcmVsb2FkfSkoKTtgO1xuXHRcdFx0XHRcdFx0cG1zID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdFx0XHRcdFx0XHRcdGNocm9tZS5jb29raWVzLnNldCh7dXJsLCBuYW1lOiBcIl9fc291bHNpZ25faW5qZWN0X19cIiwgdmFsdWU6IGVuY29kZVVSSUNvbXBvbmVudChwcmVsb2FkKX0sIHJlc29sdmUpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBtcy50aGVuKCgpID0+IGZyYW1lUnVubmVyKHRhYi5pZCwgMCwgZG9tYWlucywgdXJsKSlcblx0XHRcdFx0XHRcdC50aGVuKCh4KSA9PiB4LndhaXRMb2FkZWQoKS50aGVuKCgpID0+IHgpKVxuXHRcdFx0XHRcdFx0LnRoZW4oZm4pXG5cdFx0XHRcdFx0XHQudGhlbihyZXNvbHZlLCByZWplY3QpXG5cdFx0XHRcdFx0XHQuZmluYWxseSgoKSA9PiBjaHJvbWUudGFicy5yZW1vdmUodGFiLmlkKSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSxcblx0XHRvcGVuKHVybCwgZGV2LCBmbiwgcHJlbG9hZCkge1xuXHRcdFx0aWYgKCFjaGVja0RvbWFpbihkb21haW5zLCB1cmwpKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoYGRvbWFpbumFjee9ruS4jeato+ehrmApO1xuXHRcdFx0aWYgKC9tYWNpbnRvc2h8bWFjIG9zIHgvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKSByZXR1cm4gaW5qZWN0Lm9wZW5XaW5kb3codXJsLCBkZXYsIGZuLCBwcmVsb2FkKTtcblx0XHRcdHJldHVybiBpbmplY3Qub3BlblRhYih1cmwsIGRldiwgZm4sIHByZWxvYWQpO1xuXHRcdH0sXG5cdFx0c2hvd0luTmV3VGFiKHRpdGxlLCBkYXRhKSB7XG5cdFx0XHRjb25zdCBodG1sID0gYFxcYDx0aXRsZT4ke3Rhc2submFtZX0gLSAke3RpdGxlfTwvdGl0bGU+PGRpdj4ke2RhdGF9PC9kaXY+XFxgYDtcblx0XHRcdGNocm9tZS50YWJzLmNyZWF0ZSh7dXJsOmBqYXZhc2NyaXB0OmRvY3VtZW50LndyaXRlKCR7aHRtbH0pO2B9KTtcblx0XHR9LFxuXHR9O1xuXHRpZiAoIWdyYW50LmhhcyhcImV2YWxcIikpIHtcblx0XHQvLyDohJrmnKzkuK3lsY/olL3ku6XkuIvlhoXlrrlcblx0XHRPYmplY3QuYXNzaWduKGluamVjdCwge1xuXHRcdFx0d2luZG93OiB1bmRlZmluZWQsXG5cdFx0XHRkb2N1bWVudDogdW5kZWZpbmVkLFxuXHRcdFx0Tm90aWZpY2F0aW9uOiB1bmRlZmluZWQsXG5cdFx0XHRsb2NhdGlvbjogdW5kZWZpbmVkLFxuXHRcdFx0ZXZhbDogdW5kZWZpbmVkLFxuXHRcdFx0RnVuY3Rpb246IHVuZGVmaW5lZCxcblx0XHRcdGNocm9tZTogdW5kZWZpbmVkLFxuXHRcdFx0Z2xvYmFsVGhpczogdW5kZWZpbmVkLFxuXHRcdH0pO1xuXHR9XG5cdGxldCBpbmplY3Rfa2V5cyA9IE9iamVjdC5rZXlzKGluamVjdCk7XG5cdGxldCBpbmplY3RfdmFsdWVzID0gT2JqZWN0LnZhbHVlcyhpbmplY3QpO1xuXHR0YXNrID0gT2JqZWN0LmFzc2lnbih7fSwgdXRpbHMuVEFTS19FWFQsIHRhc2spO1xuXHRsZXQgbW9kdWxlID0ge2V4cG9ydHM6IHt9fTtcblx0bmV3IEZ1bmN0aW9uKFwiZXhwb3J0c1wiLCBcIm1vZHVsZVwiLCAuLi5pbmplY3Rfa2V5cywgdGFzay5jb2RlKShtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCAuLi5pbmplY3RfdmFsdWVzKTtcblx0dGFzay5jaGVjayA9IG1vZHVsZS5leHBvcnRzLmNoZWNrO1xuXHR0YXNrLnJ1biA9IG1vZHVsZS5leHBvcnRzLnJ1bjtcblx0cmV0dXJuIHRhc2s7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2JhY2tlbmQvc2NyaXB0YnVpbGQuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQ0E7QUFOQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQU1BO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUhBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBSEE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUF5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7Ozs7O0FBS0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBT0E7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFRQTtBQUNBO0FBVkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFhQTtBQUNBO0FBZkE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQWlCQTtBQUNBO0FBbkJBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFvQkE7QUFDQTtBQXRCQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUE0QkE7QUE1QkE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBOEJBO0FBOUlBO0FBZ0pBO0FBQ0E7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBR0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyR0E7QUF1R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///jliz\n')},lkJS:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (immutable) */ __webpack_exports__["d"] = startRecord;\n/* harmony export (immutable) */ __webpack_exports__["a"] = beginCode;\n/* harmony export (immutable) */ __webpack_exports__["c"] = onCode;\n/* harmony export (immutable) */ __webpack_exports__["b"] = getCode;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__scriptbuild__ = __webpack_require__("jliz");\n\n\nfunction contentRecord() {\n\tif (!window.__soulsign_record__) {\n\t\tvar getSelector = function getSelector(el) {\n\t\t\tvar s = "";\n\t\t\tif (el.id) {\n\t\t\t\ts = "#" + CSS.escape(el.id);\n\t\t\t\tif (document.querySelector(s) == el) return s;\n\t\t\t}\n\t\t\tvar ss = el.className.trim().split(/\\s+/);\n\t\t\tfor (var i = 0; i < ss.length; i++) {\n\t\t\t\tvar css = ss[i];\n\t\t\t\tif (css) {\n\t\t\t\t\ts += "." + css;\n\t\t\t\t\tif (document.querySelector(s) == el) return s;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!s) {\n\t\t\t\ts = el.tagName.toLowerCase();\n\t\t\t\tif (document.querySelector(s) == el) return s;\n\t\t\t}\n\t\t\tvar ps = getSelector(el.parentElement);\n\t\t\tif (!ps) return "";\n\t\t\ts = ps + ">" + s;\n\t\t\tif (document.querySelector(s) == el) return s;\n\t\t\tvar list = document.querySelectorAll(ps + ">*");\n\t\t\tfor (var _i = 0; _i < list.length; _i++) {\n\t\t\t\tif (list[_i] == el) {\n\t\t\t\t\ts = ps + (">:nth-child(" + (_i + 1) + ")");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (document.querySelector(s) == el) return s;\n\t\t\treturn "";\n\t\t};\n\n\t\tvar send = function send(body, cb) {\n\t\t\tif (window.__soulsign_record_main__) body = "await " + body;else body = "await fb.getFrame(" + JSON.stringify(frameURL) + ",2).then(fb=>" + body + ")";\n\t\t\tchrome.runtime.sendMessage({ path: "record/code", body: body }, cb);\n\t\t};\n\n\t\tvar bindInput = function bindInput(el, s) {\n\t\t\tif (!s) s = getSelector(el);\n\t\t\tif (["INPUT", "TEXTAREA"].indexOf(el.tagName) >= 0 && !/submit|button/.test(el.type) && !el.__soulsign__input__) {\n\t\t\t\tif (el.value) send("fb.value(" + JSON.stringify(s) + "," + JSON.stringify(el.value) + ")");\n\t\t\t\tel.__soulsign__input__ = function () {\n\t\t\t\t\tsend("fb.value(" + JSON.stringify(s) + "," + JSON.stringify(el.value) + ")");\n\t\t\t\t};\n\t\t\t\tel.addEventListener("change", el.__soulsign__input__);\n\t\t\t}\n\t\t};\n\n\t\tvar press = function press(s, v) {\n\t\t\tif (typeof v === "number") v = { keyCode: v };\n\t\t\tvar el = typeof s === "string" ? document.querySelector(s) : s;\n\t\t\t["keydown", "keypress", "keyup"].forEach(function (type, i) {\n\t\t\t\tvar keyboardEvent = document.createEvent("KeyboardEvent");\n\t\t\t\tkeyboardEvent[keyboardEvent.initKeyboardEvent ? "initKeyboardEvent" : "initKeyEvent"](type, // event type: keydown, keyup, keypress\n\t\t\t\ttrue, // bubbles\n\t\t\t\ttrue, // cancelable\n\t\t\t\twindow, // view: should be window\n\t\t\t\tv.ctrlKey || false, // ctrlKey\n\t\t\t\tv.altKey || false, // altKey\n\t\t\t\tv.shiftKey || false, // shiftKey\n\t\t\t\tv.metaKey || false, // metaKey\n\t\t\t\tv.keyCode || 0, // keyCode: unsigned long - the virtual key code, else 0\n\t\t\t\tv.charCode || 0 // charCode: unsigned long - the Unicode character associated with the depressed key, else 0\n\t\t\t\t);\n\t\t\t\tel.dispatchEvent(keyboardEvent);\n\t\t\t});\n\t\t\tif (v.keyCode == 13) {\n\t\t\t\tvar p = el.parentElement;\n\t\t\t\twhile (p) {\n\t\t\t\t\tif (p.tagName == "FORM") {\n\t\t\t\t\t\tp.submit();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tp = p.parentElement;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconsole.log("魂签录制中...");\n\t\twindow.__soulsign_record__ = true;\n\t\tvar frameURL = location.href.split("?")[0];\n\n\t\tdocument.addEventListener("keyup", function (e) {\n\t\t\tif (e.key == "Tab") bindInput(e.target);\n\t\t});\n\t\tdocument.addEventListener("keypress", function (e) {\n\t\t\tif (!e.isTrusted) return;\n\t\t\tif (e.key == "Enter") {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\tvar _el = e.target;\n\t\t\t\tvar s = getSelector(_el);\n\t\t\t\tif (["INPUT", "TEXTAREA"].indexOf(_el.tagName) >= 0 && !/submit|button/.test(_el.type)) {\n\t\t\t\t\tsend("fb.value(" + JSON.stringify(s) + "," + JSON.stringify(_el.value) + ")", function () {\n\t\t\t\t\t\tsend("fb.press(" + JSON.stringify(s) + ", 13)", function () {\n\t\t\t\t\t\t\treturn press(_el, 13);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsend("fb.press(" + JSON.stringify(s) + ", 13)", function () {\n\t\t\t\t\t\treturn press(_el, 13);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, true);\n\t\tdocument.addEventListener("click", function (e) {\n\t\t\tif (!e.isTrusted) return;\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tvar s = getSelector(e.target);\n\t\t\tsend("fb.click(" + JSON.stringify(s) + ")", function () {\n\t\t\t\treturn e.target.click();\n\t\t\t});\n\t\t\tbindInput(e.target, s);\n\t\t}, true);\n\t\tvar el = document.activeElement;\n\t\tif (el) bindInput(el);\n\t}\n}\n\nchrome.tabs.onUpdated.addListener(function (tabId, info) {\n\tif (tabId == prevTab) {\n\t\t// console.log(info);\n\t\tif (info.url) prevURL = info.url;\n\t\tif (info.status == "loading") {\n\t\t\tif (codes.length) {\n\t\t\t\tif (prevCodeIsWaitLoad) codes[codes.length - 1] = "await fb.waitLoaded(); // " + info.url;else codes.push("await fb.waitLoaded(); // " + info.url);\n\t\t\t\tprevCodeIsWaitLoad = true;\n\t\t\t}\n\t\t} else if (info.status == "complete") {\n\t\t\tvar fb = Object(__WEBPACK_IMPORTED_MODULE_0__scriptbuild__["b" /* frameRunner */])(prevTab, 0, ["*"]);\n\t\t\tfb.iframes().then(function (iframes) {\n\t\t\t\t// console.log(iframes);\n\t\t\t\tvar all = [fb.eval(contentRecord)];\n\t\t\t\tiframes.map(function (x) {\n\t\t\t\t\treturn x.eval(contentRecord);\n\t\t\t\t});\n\t\t\t\treturn Promise.all(all);\n\t\t\t}).then(function () {\n\t\t\t\treturn fb.eval(codeInited ? "window.__soulsign_record_main__ = true" : function () {\n\t\t\t\t\twindow.__soulsign_record_main__ = true;\n\t\t\t\t\talert("点击确定开始录制, 切换回魂签界面结束录制");\n\t\t\t\t\tchrome.runtime.sendMessage({ path: "record/begin", body: "" });\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n});\n\nchrome.webNavigation.onDOMContentLoaded.addListener(function (info) {\n\tif (info.tabId == prevTab) {\n\t\tObject(__WEBPACK_IMPORTED_MODULE_0__scriptbuild__["b" /* frameRunner */])(prevTab, info.frameId, ["*"]).eval(contentRecord);\n\t}\n});\n\n// chrome.webNavigation.onCompleted.addListener(function(info) {\n// \tif (info.tabId == prevTab) {\n// \t\tconsole.log("onCompleted", info.frameId, info.url);\n// \t}\n// });\n\nvar codes = [];\nvar prevTab = 0;\nvar prevTime = 0;\nvar prevURL = "";\nvar prevCodeIsWaitLoad = false;\nvar codeInited = false;\nfunction startRecord(body) {\n\tif (prevTab) {\n\t\tprevTab = 0;\n\t}\n\tchrome.tabs.create({ url: body.url, active: true }, function (tab) {\n\t\tchrome.cookies.set({ url: body.url, name: "__soulsign_record__", value: "1" }, function () {\n\t\t\tcodes = [];\n\t\t\tprevTab = tab.id;\n\t\t\tcodeInited = false;\n\t\t\tprevURL = body.url;\n\t\t});\n\t});\n}\n\nfunction beginCode() {\n\tcodeInited = true;\n\tprevTime = Date.now();\n}\n\nfunction onCode(s) {\n\tconsole.log("oncode", s);\n\tif (s) {\n\t\tprevCodeIsWaitLoad = false;\n\t\tif (codeInited) codes.push("await fb.sleep(" + (Date.now() - prevTime) + " * rate)");\n\t\tcodes.push(s);\n\t}\n\tprevTime = Date.now();\n}\n\nfunction getCode() {\n\tif (prevTab) {\n\t\tif (prevCodeIsWaitLoad) {\n\t\t\tcodes.push("if(!(await fb.eval(\\"location.href\\")).startsWith(" + JSON.stringify(prevURL.split("?")[0]) + ")) throw \'\\u7B7E\\u5230\\u5931\\u8D25\'");\n\t\t} else {\n\t\t\tif (codes.length) codes[codes.length - 1] = "if(!" + codes[codes.length - 1] + ") throw \'\\u7B7E\\u5230\\u5931\\u8D25\'";\n\t\t}\n\t\tprevTab = 0;\n\t}\n\treturn codes.join("\\n");\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGtKUy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYmFja2VuZC9zY3JpcHRyZWNvcmQuanM/ZTU2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2ZyYW1lUnVubmVyfSBmcm9tIFwiLi9zY3JpcHRidWlsZFwiO1xuXG5mdW5jdGlvbiBjb250ZW50UmVjb3JkKCkge1xuXHRpZiAoIXdpbmRvdy5fX3NvdWxzaWduX3JlY29yZF9fKSB7XG5cdFx0Y29uc29sZS5sb2coXCLprYLnrb7lvZXliLbkuK0uLi5cIik7XG5cdFx0d2luZG93Ll9fc291bHNpZ25fcmVjb3JkX18gPSB0cnVlO1xuXHRcdHZhciBmcmFtZVVSTCA9IGxvY2F0aW9uLmhyZWYuc3BsaXQoXCI/XCIpWzBdO1xuXHRcdGZ1bmN0aW9uIGdldFNlbGVjdG9yKGVsKSB7XG5cdFx0XHRsZXQgcyA9IFwiXCI7XG5cdFx0XHRpZiAoZWwuaWQpIHtcblx0XHRcdFx0cyA9IFwiI1wiICsgQ1NTLmVzY2FwZShlbC5pZCk7XG5cdFx0XHRcdGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpID09IGVsKSByZXR1cm4gcztcblx0XHRcdH1cblx0XHRcdGxldCBzcyA9IGVsLmNsYXNzTmFtZS50cmltKCkuc3BsaXQoL1xccysvKTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc3MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0bGV0IGNzcyA9IHNzW2ldO1xuXHRcdFx0XHRpZiAoY3NzKSB7XG5cdFx0XHRcdFx0cyArPSBcIi5cIiArIGNzcztcblx0XHRcdFx0XHRpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSA9PSBlbCkgcmV0dXJuIHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICghcykge1xuXHRcdFx0XHRzID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSA9PSBlbCkgcmV0dXJuIHM7XG5cdFx0XHR9XG5cdFx0XHRsZXQgcHMgPSBnZXRTZWxlY3RvcihlbC5wYXJlbnRFbGVtZW50KTtcblx0XHRcdGlmICghcHMpIHJldHVybiBcIlwiO1xuXHRcdFx0cyA9IHBzICsgXCI+XCIgKyBzO1xuXHRcdFx0aWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocykgPT0gZWwpIHJldHVybiBzO1xuXHRcdFx0bGV0IGxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHBzICsgXCI+KlwiKTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAobGlzdFtpXSA9PSBlbCkge1xuXHRcdFx0XHRcdHMgPSBwcyArIGA+Om50aC1jaGlsZCgke2kgKyAxfSlgO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzKSA9PSBlbCkgcmV0dXJuIHM7XG5cdFx0XHRyZXR1cm4gXCJcIjtcblx0XHR9XG5cdFx0ZnVuY3Rpb24gc2VuZChib2R5LCBjYikge1xuXHRcdFx0aWYgKHdpbmRvdy5fX3NvdWxzaWduX3JlY29yZF9tYWluX18pIGJvZHkgPSBgYXdhaXQgJHtib2R5fWA7XG5cdFx0XHRlbHNlIGJvZHkgPSBgYXdhaXQgZmIuZ2V0RnJhbWUoJHtKU09OLnN0cmluZ2lmeShmcmFtZVVSTCl9LDIpLnRoZW4oZmI9PiR7Ym9keX0pYDtcblx0XHRcdGNocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKHtwYXRoOiBcInJlY29yZC9jb2RlXCIsIGJvZHl9LCBjYik7XG5cdFx0fVxuXHRcdGZ1bmN0aW9uIGJpbmRJbnB1dChlbCwgcykge1xuXHRcdFx0aWYgKCFzKSBzID0gZ2V0U2VsZWN0b3IoZWwpO1xuXHRcdFx0aWYgKFtcIklOUFVUXCIsIFwiVEVYVEFSRUFcIl0uaW5kZXhPZihlbC50YWdOYW1lKSA+PSAwICYmICEvc3VibWl0fGJ1dHRvbi8udGVzdChlbC50eXBlKSAmJiAhZWwuX19zb3Vsc2lnbl9faW5wdXRfXykge1xuXHRcdFx0XHRpZiAoZWwudmFsdWUpIHNlbmQoYGZiLnZhbHVlKCR7SlNPTi5zdHJpbmdpZnkocyl9LCR7SlNPTi5zdHJpbmdpZnkoZWwudmFsdWUpfSlgKTtcblx0XHRcdFx0ZWwuX19zb3Vsc2lnbl9faW5wdXRfXyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHNlbmQoYGZiLnZhbHVlKCR7SlNPTi5zdHJpbmdpZnkocyl9LCR7SlNPTi5zdHJpbmdpZnkoZWwudmFsdWUpfSlgKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0ZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBlbC5fX3NvdWxzaWduX19pbnB1dF9fKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZnVuY3Rpb24gcHJlc3Mocywgdikge1xuXHRcdFx0aWYgKHR5cGVvZiB2ID09PSBcIm51bWJlclwiKSB2ID0ge2tleUNvZGU6IHZ9O1xuXHRcdFx0bGV0IGVsID0gdHlwZW9mIHMgPT09IFwic3RyaW5nXCIgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHMpIDogcztcblx0XHRcdFtcImtleWRvd25cIiwgXCJrZXlwcmVzc1wiLCBcImtleXVwXCJdLmZvckVhY2goZnVuY3Rpb24odHlwZSwgaSkge1xuXHRcdFx0XHR2YXIga2V5Ym9hcmRFdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiS2V5Ym9hcmRFdmVudFwiKTtcblx0XHRcdFx0a2V5Ym9hcmRFdmVudFtrZXlib2FyZEV2ZW50LmluaXRLZXlib2FyZEV2ZW50ID8gXCJpbml0S2V5Ym9hcmRFdmVudFwiIDogXCJpbml0S2V5RXZlbnRcIl0oXG5cdFx0XHRcdFx0dHlwZSwgLy8gZXZlbnQgdHlwZToga2V5ZG93biwga2V5dXAsIGtleXByZXNzXG5cdFx0XHRcdFx0dHJ1ZSwgLy8gYnViYmxlc1xuXHRcdFx0XHRcdHRydWUsIC8vIGNhbmNlbGFibGVcblx0XHRcdFx0XHR3aW5kb3csIC8vIHZpZXc6IHNob3VsZCBiZSB3aW5kb3dcblx0XHRcdFx0XHR2LmN0cmxLZXkgfHwgZmFsc2UsIC8vIGN0cmxLZXlcblx0XHRcdFx0XHR2LmFsdEtleSB8fCBmYWxzZSwgLy8gYWx0S2V5XG5cdFx0XHRcdFx0di5zaGlmdEtleSB8fCBmYWxzZSwgLy8gc2hpZnRLZXlcblx0XHRcdFx0XHR2Lm1ldGFLZXkgfHwgZmFsc2UsIC8vIG1ldGFLZXlcblx0XHRcdFx0XHR2LmtleUNvZGUgfHwgMCwgLy8ga2V5Q29kZTogdW5zaWduZWQgbG9uZyAtIHRoZSB2aXJ0dWFsIGtleSBjb2RlLCBlbHNlIDBcblx0XHRcdFx0XHR2LmNoYXJDb2RlIHx8IDAgLy8gY2hhckNvZGU6IHVuc2lnbmVkIGxvbmcgLSB0aGUgVW5pY29kZSBjaGFyYWN0ZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBkZXByZXNzZWQga2V5LCBlbHNlIDBcblx0XHRcdFx0KTtcblx0XHRcdFx0ZWwuZGlzcGF0Y2hFdmVudChrZXlib2FyZEV2ZW50KTtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHYua2V5Q29kZSA9PSAxMykge1xuXHRcdFx0XHRsZXQgcCA9IGVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdHdoaWxlIChwKSB7XG5cdFx0XHRcdFx0aWYgKHAudGFnTmFtZSA9PSBcIkZPUk1cIikge1xuXHRcdFx0XHRcdFx0cC5zdWJtaXQoKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwID0gcC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRpZiAoZS5rZXkgPT0gXCJUYWJcIikgYmluZElucHV0KGUudGFyZ2V0KTtcblx0XHR9KTtcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuXHRcdFx0XCJrZXlwcmVzc1wiLFxuXHRcdFx0ZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRpZiAoIWUuaXNUcnVzdGVkKSByZXR1cm47XG5cdFx0XHRcdGlmIChlLmtleSA9PSBcIkVudGVyXCIpIHtcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRsZXQgZWwgPSBlLnRhcmdldDtcblx0XHRcdFx0XHRsZXQgcyA9IGdldFNlbGVjdG9yKGVsKTtcblx0XHRcdFx0XHRpZiAoW1wiSU5QVVRcIiwgXCJURVhUQVJFQVwiXS5pbmRleE9mKGVsLnRhZ05hbWUpID49IDAgJiYgIS9zdWJtaXR8YnV0dG9uLy50ZXN0KGVsLnR5cGUpKSB7XG5cdFx0XHRcdFx0XHRzZW5kKGBmYi52YWx1ZSgke0pTT04uc3RyaW5naWZ5KHMpfSwke0pTT04uc3RyaW5naWZ5KGVsLnZhbHVlKX0pYCwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHNlbmQoYGZiLnByZXNzKCR7SlNPTi5zdHJpbmdpZnkocyl9LCAxMylgLCAoKSA9PiBwcmVzcyhlbCwgMTMpKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZW5kKGBmYi5wcmVzcygke0pTT04uc3RyaW5naWZ5KHMpfSwgMTMpYCwgKCkgPT4gcHJlc3MoZWwsIDEzKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0dHJ1ZVxuXHRcdCk7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcblx0XHRcdFwiY2xpY2tcIixcblx0XHRcdGZ1bmN0aW9uKGUpIHtcblx0XHRcdFx0aWYgKCFlLmlzVHJ1c3RlZCkgcmV0dXJuO1xuXHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGxldCBzID0gZ2V0U2VsZWN0b3IoZS50YXJnZXQpO1xuXHRcdFx0XHRzZW5kKGBmYi5jbGljaygke0pTT04uc3RyaW5naWZ5KHMpfSlgLCAoKSA9PiBlLnRhcmdldC5jbGljaygpKTtcblx0XHRcdFx0YmluZElucHV0KGUudGFyZ2V0LCBzKTtcblx0XHRcdH0sXG5cdFx0XHR0cnVlXG5cdFx0KTtcblx0XHRsZXQgZWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHRcdGlmIChlbCkgYmluZElucHV0KGVsKTtcblx0fVxufVxuXG5jaHJvbWUudGFicy5vblVwZGF0ZWQuYWRkTGlzdGVuZXIoZnVuY3Rpb24odGFiSWQsIGluZm8pIHtcblx0aWYgKHRhYklkID09IHByZXZUYWIpIHtcblx0XHQvLyBjb25zb2xlLmxvZyhpbmZvKTtcblx0XHRpZiAoaW5mby51cmwpIHByZXZVUkwgPSBpbmZvLnVybDtcblx0XHRpZiAoaW5mby5zdGF0dXMgPT0gXCJsb2FkaW5nXCIpIHtcblx0XHRcdGlmIChjb2Rlcy5sZW5ndGgpIHtcblx0XHRcdFx0aWYgKHByZXZDb2RlSXNXYWl0TG9hZCkgY29kZXNbY29kZXMubGVuZ3RoIC0gMV0gPSBgYXdhaXQgZmIud2FpdExvYWRlZCgpOyAvLyAke2luZm8udXJsfWA7XG5cdFx0XHRcdGVsc2UgY29kZXMucHVzaChgYXdhaXQgZmIud2FpdExvYWRlZCgpOyAvLyAke2luZm8udXJsfWApO1xuXHRcdFx0XHRwcmV2Q29kZUlzV2FpdExvYWQgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoaW5mby5zdGF0dXMgPT0gXCJjb21wbGV0ZVwiKSB7XG5cdFx0XHR2YXIgZmIgPSBmcmFtZVJ1bm5lcihwcmV2VGFiLCAwLCBbXCIqXCJdKTtcblx0XHRcdGZiLmlmcmFtZXMoKVxuXHRcdFx0XHQudGhlbigoaWZyYW1lcykgPT4ge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKGlmcmFtZXMpO1xuXHRcdFx0XHRcdGxldCBhbGwgPSBbZmIuZXZhbChjb250ZW50UmVjb3JkKV07XG5cdFx0XHRcdFx0aWZyYW1lcy5tYXAoKHgpID0+IHguZXZhbChjb250ZW50UmVjb3JkKSk7XG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKGFsbCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKCgpID0+XG5cdFx0XHRcdFx0ZmIuZXZhbChcblx0XHRcdFx0XHRcdGNvZGVJbml0ZWRcblx0XHRcdFx0XHRcdFx0PyBgd2luZG93Ll9fc291bHNpZ25fcmVjb3JkX21haW5fXyA9IHRydWVgXG5cdFx0XHRcdFx0XHRcdDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuX19zb3Vsc2lnbl9yZWNvcmRfbWFpbl9fID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdGFsZXJ0KFwi54K55Ye756Gu5a6a5byA5aeL5b2V5Yi2LCDliIfmjaLlm57prYLnrb7nlYzpnaLnu5PmnZ/lvZXliLZcIik7XG5cdFx0XHRcdFx0XHRcdFx0XHRjaHJvbWUucnVudGltZS5zZW5kTWVzc2FnZSh7cGF0aDogXCJyZWNvcmQvYmVnaW5cIiwgYm9keTogXCJcIn0pO1xuXHRcdFx0XHRcdFx0XHQgIH1cblx0XHRcdFx0XHQpXG5cdFx0XHRcdCk7XG5cdFx0fVxuXHR9XG59KTtcblxuY2hyb21lLndlYk5hdmlnYXRpb24ub25ET01Db250ZW50TG9hZGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGluZm8pIHtcblx0aWYgKGluZm8udGFiSWQgPT0gcHJldlRhYikge1xuXHRcdGZyYW1lUnVubmVyKHByZXZUYWIsIGluZm8uZnJhbWVJZCwgW1wiKlwiXSkuZXZhbChjb250ZW50UmVjb3JkKTtcblx0fVxufSk7XG5cbi8vIGNocm9tZS53ZWJOYXZpZ2F0aW9uLm9uQ29tcGxldGVkLmFkZExpc3RlbmVyKGZ1bmN0aW9uKGluZm8pIHtcbi8vIFx0aWYgKGluZm8udGFiSWQgPT0gcHJldlRhYikge1xuLy8gXHRcdGNvbnNvbGUubG9nKFwib25Db21wbGV0ZWRcIiwgaW5mby5mcmFtZUlkLCBpbmZvLnVybCk7XG4vLyBcdH1cbi8vIH0pO1xuXG5sZXQgY29kZXMgPSBbXTtcbmxldCBwcmV2VGFiID0gMDtcbmxldCBwcmV2VGltZSA9IDA7XG5sZXQgcHJldlVSTCA9IFwiXCI7XG5sZXQgcHJldkNvZGVJc1dhaXRMb2FkID0gZmFsc2U7XG5sZXQgY29kZUluaXRlZCA9IGZhbHNlO1xuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0UmVjb3JkKGJvZHkpIHtcblx0aWYgKHByZXZUYWIpIHtcblx0XHRwcmV2VGFiID0gMDtcblx0fVxuXHRjaHJvbWUudGFicy5jcmVhdGUoe3VybDogYm9keS51cmwsIGFjdGl2ZTogdHJ1ZX0sIGZ1bmN0aW9uKHRhYikge1xuXHRcdGNocm9tZS5jb29raWVzLnNldCh7dXJsOiBib2R5LnVybCwgbmFtZTogXCJfX3NvdWxzaWduX3JlY29yZF9fXCIsIHZhbHVlOiBcIjFcIn0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29kZXMgPSBbXTtcblx0XHRcdHByZXZUYWIgPSB0YWIuaWQ7XG5cdFx0XHRjb2RlSW5pdGVkID0gZmFsc2U7XG5cdFx0XHRwcmV2VVJMID0gYm9keS51cmw7XG5cdFx0fSk7XG5cdH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmVnaW5Db2RlKCkge1xuXHRjb2RlSW5pdGVkID0gdHJ1ZTtcblx0cHJldlRpbWUgPSBEYXRlLm5vdygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb25Db2RlKHMpIHtcblx0Y29uc29sZS5sb2coXCJvbmNvZGVcIiwgcyk7XG5cdGlmIChzKSB7XG5cdFx0cHJldkNvZGVJc1dhaXRMb2FkID0gZmFsc2U7XG5cdFx0aWYgKGNvZGVJbml0ZWQpIGNvZGVzLnB1c2goYGF3YWl0IGZiLnNsZWVwKCR7RGF0ZS5ub3coKSAtIHByZXZUaW1lfSAqIHJhdGUpYCk7XG5cdFx0Y29kZXMucHVzaChzKTtcblx0fVxuXHRwcmV2VGltZSA9IERhdGUubm93KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb2RlKCkge1xuXHRpZiAocHJldlRhYikge1xuXHRcdGlmIChwcmV2Q29kZUlzV2FpdExvYWQpIHtcblx0XHRcdGNvZGVzLnB1c2goYGlmKCEoYXdhaXQgZmIuZXZhbChcImxvY2F0aW9uLmhyZWZcIikpLnN0YXJ0c1dpdGgoJHtKU09OLnN0cmluZ2lmeShwcmV2VVJMLnNwbGl0KFwiP1wiKVswXSl9KSkgdGhyb3cgJ+etvuWIsOWksei0pSdgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKGNvZGVzLmxlbmd0aCkgY29kZXNbY29kZXMubGVuZ3RoIC0gMV0gPSBgaWYoISR7Y29kZXNbY29kZXMubGVuZ3RoIC0gMV19KSB0aHJvdyAn562+5Yiw5aSx6LSlJ2A7XG5cdFx0fVxuXHRcdHByZXZUYWIgPSAwO1xuXHR9XG5cdHJldHVybiBjb2Rlcy5qb2luKFwiXFxuXCIpO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHNyYy9iYWNrZW5kL3NjcmlwdHJlY29yZC5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcENBO0FBcUNBO0FBRUE7QUFDQTtBQUNBO0FBekNBO0FBMENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkRBO0FBb0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoRkE7QUFDQTtBQUNBO0FBQ0E7QUE2RUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///lkJS\n')},"o/p8":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__("QmEn");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils__ = __webpack_require__("8jN1");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__scriptbuild__ = __webpack_require__("jliz");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__scriptrecord__ = __webpack_require__("lkJS");\n\n\n\n\n\n/* harmony default export */ __webpack_exports__["a"] = ({\n\t"config/get": function configGet() {\n\t\treturn __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */];\n\t},\n\t"config/set": function configSet(body) {\n\t\tObject.assign(__WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */], body);\n\t\treturn __WEBPACK_IMPORTED_MODULE_1__utils__["a" /* default */].syncSave({ config: __WEBPACK_IMPORTED_MODULE_0__config__["a" /* default */] });\n\t},\n\t"task/list": function taskList() {\n\t\treturn __WEBPACK_IMPORTED_MODULE_1__utils__["a" /* default */].getTasks();\n\t},\n\t"task/del": function taskDel(name) {\n\t\treturn __WEBPACK_IMPORTED_MODULE_1__utils__["a" /* default */].delTask(name);\n\t},\n\t"task/add": function taskAdd(task) {\n\t\treturn __WEBPACK_IMPORTED_MODULE_1__utils__["a" /* default */].addTask(Object(__WEBPACK_IMPORTED_MODULE_2__scriptbuild__["a" /* default */])(task));\n\t},\n\t"task/set": function taskSet(task) {\n\t\treturn __WEBPACK_IMPORTED_MODULE_1__utils__["a" /* default */].setTask(task);\n\t},\n\t"task/run": function taskRun(name) {\n\t\treturn __WEBPACK_IMPORTED_MODULE_1__utils__["a" /* default */].runTask(name);\n\t},\n\t"record/start": function recordStart(data) {\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_3__scriptrecord__["d" /* startRecord */])(data);\n\t},\n\t"record/begin": function recordBegin(data) {\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_3__scriptrecord__["a" /* beginCode */])(data);\n\t},\n\t"record/code": function recordCode(data) {\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_3__scriptrecord__["c" /* onCode */])(data);\n\t},\n\t"record/end": function recordEnd(data) {\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_3__scriptrecord__["b" /* getCode */])(data);\n\t}\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiby9wOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zcmMvYmFja2VuZC9iYWNrYXBpLmpzPzU2ZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi9jb25maWdcIjtcbmltcG9ydCB1dGlscyBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHNjcmlwdGJ1aWxkIGZyb20gXCIuL3NjcmlwdGJ1aWxkXCI7XG5pbXBvcnQge2dldENvZGUsIGJlZ2luQ29kZSwgb25Db2RlLCBzdGFydFJlY29yZH0gZnJvbSBcIi4vc2NyaXB0cmVjb3JkXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcblx0XCJjb25maWcvZ2V0XCIoKSB7XG5cdFx0cmV0dXJuIGNvbmZpZztcblx0fSxcblx0XCJjb25maWcvc2V0XCIoYm9keSkge1xuXHRcdE9iamVjdC5hc3NpZ24oY29uZmlnLCBib2R5KTtcblx0XHRyZXR1cm4gdXRpbHMuc3luY1NhdmUoe2NvbmZpZ30pO1xuXHR9LFxuXHRcInRhc2svbGlzdFwiKCkge1xuXHRcdHJldHVybiB1dGlscy5nZXRUYXNrcygpO1xuXHR9LFxuXHRcInRhc2svZGVsXCIobmFtZSkge1xuXHRcdHJldHVybiB1dGlscy5kZWxUYXNrKG5hbWUpO1xuXHR9LFxuXHRcInRhc2svYWRkXCIodGFzaykge1xuXHRcdHJldHVybiB1dGlscy5hZGRUYXNrKHNjcmlwdGJ1aWxkKHRhc2spKTtcblx0fSxcblx0XCJ0YXNrL3NldFwiKHRhc2spIHtcblx0XHRyZXR1cm4gdXRpbHMuc2V0VGFzayh0YXNrKTtcblx0fSxcblx0XCJ0YXNrL3J1blwiKG5hbWUpIHtcblx0XHRyZXR1cm4gdXRpbHMucnVuVGFzayhuYW1lKTtcblx0fSxcblx0XCJyZWNvcmQvc3RhcnRcIihkYXRhKSB7XG5cdFx0cmV0dXJuIHN0YXJ0UmVjb3JkKGRhdGEpO1xuXHR9LFxuXHRcInJlY29yZC9iZWdpblwiKGRhdGEpIHtcblx0XHRyZXR1cm4gYmVnaW5Db2RlKGRhdGEpO1xuXHR9LFxuXHRcInJlY29yZC9jb2RlXCIoZGF0YSkge1xuXHRcdHJldHVybiBvbkNvZGUoZGF0YSk7XG5cdH0sXG5cdFwicmVjb3JkL2VuZFwiKGRhdGEpIHtcblx0XHRyZXR1cm4gZ2V0Q29kZShkYXRhKTtcblx0fSxcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gc3JjL2JhY2tlbmQvYmFja2FwaS5qcyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWxDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///o/p8\n')}},["O3Mt"]);